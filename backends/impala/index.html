
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ibis-project.org/backends/impala/">
      
      <link rel="icon" href="../../static/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.11">
    
    
      
        <title>Impala - Ibis Project</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.50e68009.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
<meta name="google-site-verification" content="IVqzkYiD5E35oD4kkVOcTYCTfqWKU1f6zOHCnLIPkUU">

  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="lime">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#impala" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Ibis Project" class="md-header__button md-logo" aria-label="Ibis Project" data-md-component="logo">
      
  <img src="../../static/icons/ibis/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ibis Project
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Impala
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ibis-project/ibis/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Ibis Project" class="md-nav__button md-logo" aria-label="Ibis Project" data-md-component="logo">
      
  <img src="../../static/icons/ibis/logo.svg" alt="logo">

    </a>
    Ibis Project
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ibis-project/ibis/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorial" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/01-Introduction-to-Ibis/" class="md-nav__link">
        Introduction to Ibis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/02-Aggregates-Joins/" class="md-nav__link">
        Aggregating and joining data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/03-Expressions-Lazy-Mode-Logging/" class="md-nav__link">
        Expressions, lazy mode and logging queries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/04-More-Value-Expressions/" class="md-nav__link">
        More Value Expressions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/05-IO-Create-Insert-External-Data/" class="md-nav__link">
        Creating and inserting data
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6" type="checkbox" id="__nav_3_6" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_6">
          Advanced Topics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Advanced Topics" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          Advanced Topics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/06-Advanced-Topics-ComplexFiltering/" class="md-nav__link">
        Additional Filtering
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/07-Advanced-Topics-Analytics-Tools/" class="md-nav__link">
        Analytics Tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/08-Geospatial-Analysis/" class="md-nav__link">
        Ibis and Geospatial Operations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/sql/" class="md-nav__link">
        Ibis for SQL Programmers
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/topk/" class="md-nav__link">
        TopK
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/self_joins/" class="md-nav__link">
        Self Joins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/udfs/" class="md-nav__link">
        UDFs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/design/" class="md-nav__link">
        Design
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_6" type="checkbox" id="__nav_5_6" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5_6">
          Extending
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Extending" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_6">
          <span class="md-nav__icon md-icon"></span>
          Extending
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/extending/extending_elementwise_expr/" class="md-nav__link">
        Adding an Elementwise Operation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/extending/extending_reduce_expr/" class="md-nav__link">
        Adding a Reduction Operation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">Backends</a>
          
            <label for="__nav_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Backends" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Backends
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../clickhouse/" class="md-nav__link">
        ClickHouse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dask/" class="md-nav__link">
        Dask
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../datafusion/" class="md-nav__link">
        Datafusion
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Impala
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Impala
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    Install
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connect" class="md-nav__link">
    Connect
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-methods" class="md-nav__link">
    Database methods
  </a>
  
    <nav class="md-nav" aria-label="Database methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend" class="md-nav__link">
    Backend
  </a>
  
    <nav class="md-nav" aria-label="Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.create_database" class="md-nav__link">
    create_database()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.drop_database" class="md-nav__link">
    drop_database()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.list_databases" class="md-nav__link">
    list_databases()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-methods" class="md-nav__link">
    Table methods
  </a>
  
    <nav class="md-nav" aria-label="Table methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend" class="md-nav__link">
    Backend
  </a>
  
    <nav class="md-nav" aria-label="Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.cache_table" class="md-nav__link">
    cache_table()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.create_table" class="md-nav__link">
    create_table()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.drop_table" class="md-nav__link">
    drop_table()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.get_options" class="md-nav__link">
    get_options()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.get_schema" class="md-nav__link">
    get_schema()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.insert" class="md-nav__link">
    insert()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.invalidate_metadata" class="md-nav__link">
    invalidate_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.list_tables" class="md-nav__link">
    list_tables()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.load_data" class="md-nav__link">
    load_data()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.truncate_table" class="md-nav__link">
    truncate_table()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
    <nav class="md-nav" aria-label="ImpalaTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-attributes" class="md-nav__link">
    Attributes
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.is_partitioned" class="md-nav__link">
    is_partitioned
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.add_partition" class="md-nav__link">
    add_partition()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.alter" class="md-nav__link">
    alter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.alter_partition" class="md-nav__link">
    alter_partition()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.column_stats" class="md-nav__link">
    column_stats()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.compute_stats" class="md-nav__link">
    compute_stats()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.describe_formatted" class="md-nav__link">
    describe_formatted()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.drop" class="md-nav__link">
    drop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.drop_partition" class="md-nav__link">
    drop_partition()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.files" class="md-nav__link">
    files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.insert" class="md-nav__link">
    insert()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.load_data" class="md-nav__link">
    load_data()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.metadata" class="md-nav__link">
    metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.partition_schema" class="md-nav__link">
    partition_schema()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.partitions" class="md-nav__link">
    partitions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.rename" class="md-nav__link">
    rename()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.stats" class="md-nav__link">
    stats()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-views" class="md-nav__link">
    Creating views
  </a>
  
    <nav class="md-nav" aria-label="Creating views">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend" class="md-nav__link">
    Backend
  </a>
  
    <nav class="md-nav" aria-label="Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.create_view" class="md-nav__link">
    create_view()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.drop_table_or_view" class="md-nav__link">
    drop_table_or_view()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-data-formats-in-hdfs" class="md-nav__link">
    Accessing data formats in HDFS
  </a>
  
    <nav class="md-nav" aria-label="Accessing data formats in HDFS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend" class="md-nav__link">
    Backend
  </a>
  
    <nav class="md-nav" aria-label="Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.avro_file" class="md-nav__link">
    avro_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.delimited_file" class="md-nav__link">
    delimited_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.parquet_file" class="md-nav__link">
    parquet_file()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hdfs-interaction" class="md-nav__link">
    HDFS Interaction
  </a>
  
    <nav class="md-nav" aria-label="HDFS Interaction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.hdfs.hdfs_connect" class="md-nav__link">
    hdfs_connect()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-impala-client-object" class="md-nav__link">
    The Impala client object
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-objects" class="md-nav__link">
    Table objects
  </a>
  
    <nav class="md-nav" aria-label="Table objects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.base.sql.Backend.table" class="md-nav__link">
    table()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expression-execution" class="md-nav__link">
    Expression execution
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-tables" class="md-nav__link">
    Creating tables
  </a>
  
    <nav class="md-nav" aria-label="Creating tables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.create_table" class="md-nav__link">
    create_table()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-tables-from-a-table-expression" class="md-nav__link">
    Creating tables from a table expression
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-empty-table" class="md-nav__link">
    Creating an empty table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-partitioned-table" class="md-nav__link">
    Creating a partitioned table
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partitioned-tables" class="md-nav__link">
    Partitioned tables
  </a>
  
    <nav class="md-nav" aria-label="Partitioned tables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
    <nav class="md-nav" aria-label="ImpalaTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-attributes" class="md-nav__link">
    Attributes
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.is_partitioned" class="md-nav__link">
    is_partitioned
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.add_partition" class="md-nav__link">
    add_partition()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.drop_partition" class="md-nav__link">
    drop_partition()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.partition_schema" class="md-nav__link">
    partition_schema()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.partitions" class="md-nav__link">
    partitions()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inserting-data-into-tables" class="md-nav__link">
    Inserting data into tables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managing-table-metadata" class="md-nav__link">
    Managing table metadata
  </a>
  
    <nav class="md-nav" aria-label="Managing table metadata">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#detailed-table-metadata-describe-formatted" class="md-nav__link">
    Detailed table metadata: DESCRIBE FORMATTED
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.metadata" class="md-nav__link">
    metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
    <nav class="md-nav" aria-label="ImpalaTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.files" class="md-nav__link">
    files()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifying-table-metadata" class="md-nav__link">
    Modifying table metadata
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
    <nav class="md-nav" aria-label="ImpalaTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.alter" class="md-nav__link">
    alter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.alter_partition" class="md-nav__link">
    alter_partition()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-statistics" class="md-nav__link">
    Table statistics
  </a>
  
    <nav class="md-nav" aria-label="Table statistics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#computing-table-and-partition-statistics" class="md-nav__link">
    Computing table and partition statistics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
    <nav class="md-nav" aria-label="ImpalaTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.compute_stats" class="md-nav__link">
    compute_stats()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#seeing-table-and-column-statistics" class="md-nav__link">
    Seeing table and column statistics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
    <nav class="md-nav" aria-label="ImpalaTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.column_stats" class="md-nav__link">
    column_stats()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.stats" class="md-nav__link">
    stats()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#refresh-and-invalidate-metadata" class="md-nav__link">
    REFRESH and INVALIDATE METADATA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend" class="md-nav__link">
    Backend
  </a>
  
    <nav class="md-nav" aria-label="Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.invalidate_metadata" class="md-nav__link">
    invalidate_metadata()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#issuing-load-data-commands" class="md-nav__link">
    Issuing LOAD DATA commands
  </a>
  
    <nav class="md-nav" aria-label="Issuing LOAD DATA commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend" class="md-nav__link">
    Backend
  </a>
  
    <nav class="md-nav" aria-label="Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.load_data" class="md-nav__link">
    load_data()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
    <nav class="md-nav" aria-label="ImpalaTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.load_data" class="md-nav__link">
    load_data()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parquet-and-other-session-options" class="md-nav__link">
    Parquet and other session options
  </a>
  
    <nav class="md-nav" aria-label="Parquet and other session options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend" class="md-nav__link">
    Backend
  </a>
  
    <nav class="md-nav" aria-label="Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.disable_codegen" class="md-nav__link">
    disable_codegen()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.get_options" class="md-nav__link">
    get_options()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ingesting-data-from-pandas" class="md-nav__link">
    Ingesting data from pandas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uploading-downloading-data-from-hdfs" class="md-nav__link">
    Uploading / downloading data from HDFS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queries-on-parquet-avro-and-delimited-files-in-hdfs" class="md-nav__link">
    Queries on Parquet, Avro, and Delimited files in HDFS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-helper-functions-for-interacting-with-the-database" class="md-nav__link">
    Other helper functions for interacting with the database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faster-queries-on-small-data-in-impala" class="md-nav__link">
    Faster queries on small data in Impala
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-defined-functions-udf" class="md-nav__link">
    User Defined functions (UDF)
  </a>
  
    <nav class="md-nav" aria-label="User Defined functions (UDF)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-scalar-functions-udfs" class="md-nav__link">
    Using scalar functions (UDFs)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mysql/" class="md-nav__link">
        MySQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pandas/" class="md-nav__link">
        Pandas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../postgres/" class="md-nav__link">
        PostgreSQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pyspark/" class="md-nav__link">
        PySpark
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sqlite/" class="md-nav__link">
        SQLite
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7">
          Community
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Community" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Community
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1" type="checkbox" id="__nav_7_1" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_1">
          About
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="About" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_1">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/team/" class="md-nav__link">
        Team
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/roadmap/" class="md-nav__link">
        Roadmap
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/license/" class="md-nav__link">
        License
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://stackoverflow.com/questions/tagged/ibis" class="md-nav__link">
        Ask a question (StackOverflow)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://gitter.im/ibis-dev/Lobby" class="md-nav__link">
        Chat (Gitter)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/coc/" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/ecosystem/" class="md-nav__link">
        Ecosystem
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8">
          Contribute
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Contribute" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Contribute
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/environment/" class="md-nav__link">
        Development Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/workflow/" class="md-nav__link">
        Commit Workflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/style/" class="md-nav__link">
        Development Style
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/backend_test_suite/" class="md-nav__link">
        Backend Test Suite
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/maintainers_guide/" class="md-nav__link">
        Maintainer's Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../release_notes/" class="md-nav__link">
        Release Notes
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_10">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_1" type="checkbox" id="__nav_10_1" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../api/expressions/">Expressions</a>
          
            <label for="__nav_10_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Expressions" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_1">
          <span class="md-nav__icon md-icon"></span>
          Expressions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/expressions/top_level/" class="md-nav__link">
        Top Level
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/expressions/tables/" class="md-nav__link">
        Tables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/expressions/generic/" class="md-nav__link">
        Generic Values
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/expressions/numeric/" class="md-nav__link">
        Numeric + Boolean
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/expressions/strings/" class="md-nav__link">
        Strings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/expressions/timestamps/" class="md-nav__link">
        Timestamps + Dates + Times
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/expressions/collections/" class="md-nav__link">
        Collections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/expressions/geospatial/" class="md-nav__link">
        Geospatial
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/datatypes/" class="md-nav__link">
        Data Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_3" type="checkbox" id="__nav_10_3" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_10_3">
          Backend Interfaces
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Backend Interfaces" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_3">
          <span class="md-nav__icon md-icon"></span>
          Backend Interfaces
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/backends/base/" class="md-nav__link">
        Base Class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/backends/sql/" class="md-nav__link">
        Generic SQL Backends
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/backends/sqlalchemy/" class="md-nav__link">
        SQLAlchemy Backends
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    Install
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connect" class="md-nav__link">
    Connect
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-methods" class="md-nav__link">
    Database methods
  </a>
  
    <nav class="md-nav" aria-label="Database methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend" class="md-nav__link">
    Backend
  </a>
  
    <nav class="md-nav" aria-label="Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.create_database" class="md-nav__link">
    create_database()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.drop_database" class="md-nav__link">
    drop_database()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.list_databases" class="md-nav__link">
    list_databases()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-methods" class="md-nav__link">
    Table methods
  </a>
  
    <nav class="md-nav" aria-label="Table methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend" class="md-nav__link">
    Backend
  </a>
  
    <nav class="md-nav" aria-label="Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.cache_table" class="md-nav__link">
    cache_table()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.create_table" class="md-nav__link">
    create_table()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.drop_table" class="md-nav__link">
    drop_table()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.get_options" class="md-nav__link">
    get_options()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.get_schema" class="md-nav__link">
    get_schema()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.insert" class="md-nav__link">
    insert()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.invalidate_metadata" class="md-nav__link">
    invalidate_metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.list_tables" class="md-nav__link">
    list_tables()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.load_data" class="md-nav__link">
    load_data()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.truncate_table" class="md-nav__link">
    truncate_table()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
    <nav class="md-nav" aria-label="ImpalaTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-attributes" class="md-nav__link">
    Attributes
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.is_partitioned" class="md-nav__link">
    is_partitioned
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.add_partition" class="md-nav__link">
    add_partition()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.alter" class="md-nav__link">
    alter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.alter_partition" class="md-nav__link">
    alter_partition()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.column_stats" class="md-nav__link">
    column_stats()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.compute_stats" class="md-nav__link">
    compute_stats()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.describe_formatted" class="md-nav__link">
    describe_formatted()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.drop" class="md-nav__link">
    drop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.drop_partition" class="md-nav__link">
    drop_partition()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.files" class="md-nav__link">
    files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.insert" class="md-nav__link">
    insert()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.load_data" class="md-nav__link">
    load_data()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.metadata" class="md-nav__link">
    metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.partition_schema" class="md-nav__link">
    partition_schema()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.partitions" class="md-nav__link">
    partitions()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.rename" class="md-nav__link">
    rename()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.stats" class="md-nav__link">
    stats()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-views" class="md-nav__link">
    Creating views
  </a>
  
    <nav class="md-nav" aria-label="Creating views">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend" class="md-nav__link">
    Backend
  </a>
  
    <nav class="md-nav" aria-label="Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.create_view" class="md-nav__link">
    create_view()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.drop_table_or_view" class="md-nav__link">
    drop_table_or_view()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-data-formats-in-hdfs" class="md-nav__link">
    Accessing data formats in HDFS
  </a>
  
    <nav class="md-nav" aria-label="Accessing data formats in HDFS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend" class="md-nav__link">
    Backend
  </a>
  
    <nav class="md-nav" aria-label="Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.avro_file" class="md-nav__link">
    avro_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.delimited_file" class="md-nav__link">
    delimited_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.parquet_file" class="md-nav__link">
    parquet_file()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hdfs-interaction" class="md-nav__link">
    HDFS Interaction
  </a>
  
    <nav class="md-nav" aria-label="HDFS Interaction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.hdfs.hdfs_connect" class="md-nav__link">
    hdfs_connect()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-impala-client-object" class="md-nav__link">
    The Impala client object
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-objects" class="md-nav__link">
    Table objects
  </a>
  
    <nav class="md-nav" aria-label="Table objects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.base.sql.Backend.table" class="md-nav__link">
    table()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expression-execution" class="md-nav__link">
    Expression execution
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-tables" class="md-nav__link">
    Creating tables
  </a>
  
    <nav class="md-nav" aria-label="Creating tables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.create_table" class="md-nav__link">
    create_table()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-tables-from-a-table-expression" class="md-nav__link">
    Creating tables from a table expression
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-empty-table" class="md-nav__link">
    Creating an empty table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-partitioned-table" class="md-nav__link">
    Creating a partitioned table
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partitioned-tables" class="md-nav__link">
    Partitioned tables
  </a>
  
    <nav class="md-nav" aria-label="Partitioned tables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
    <nav class="md-nav" aria-label="ImpalaTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-attributes" class="md-nav__link">
    Attributes
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.is_partitioned" class="md-nav__link">
    is_partitioned
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.add_partition" class="md-nav__link">
    add_partition()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.drop_partition" class="md-nav__link">
    drop_partition()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.partition_schema" class="md-nav__link">
    partition_schema()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.partitions" class="md-nav__link">
    partitions()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inserting-data-into-tables" class="md-nav__link">
    Inserting data into tables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managing-table-metadata" class="md-nav__link">
    Managing table metadata
  </a>
  
    <nav class="md-nav" aria-label="Managing table metadata">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#detailed-table-metadata-describe-formatted" class="md-nav__link">
    Detailed table metadata: DESCRIBE FORMATTED
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.metadata" class="md-nav__link">
    metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
    <nav class="md-nav" aria-label="ImpalaTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.files" class="md-nav__link">
    files()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifying-table-metadata" class="md-nav__link">
    Modifying table metadata
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
    <nav class="md-nav" aria-label="ImpalaTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.alter" class="md-nav__link">
    alter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.alter_partition" class="md-nav__link">
    alter_partition()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-statistics" class="md-nav__link">
    Table statistics
  </a>
  
    <nav class="md-nav" aria-label="Table statistics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#computing-table-and-partition-statistics" class="md-nav__link">
    Computing table and partition statistics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
    <nav class="md-nav" aria-label="ImpalaTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.compute_stats" class="md-nav__link">
    compute_stats()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#seeing-table-and-column-statistics" class="md-nav__link">
    Seeing table and column statistics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
    <nav class="md-nav" aria-label="ImpalaTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.column_stats" class="md-nav__link">
    column_stats()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.stats" class="md-nav__link">
    stats()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#refresh-and-invalidate-metadata" class="md-nav__link">
    REFRESH and INVALIDATE METADATA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend" class="md-nav__link">
    Backend
  </a>
  
    <nav class="md-nav" aria-label="Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.invalidate_metadata" class="md-nav__link">
    invalidate_metadata()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#issuing-load-data-commands" class="md-nav__link">
    Issuing LOAD DATA commands
  </a>
  
    <nav class="md-nav" aria-label="Issuing LOAD DATA commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend" class="md-nav__link">
    Backend
  </a>
  
    <nav class="md-nav" aria-label="Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.load_data" class="md-nav__link">
    load_data()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable" class="md-nav__link">
    ImpalaTable
  </a>
  
    <nav class="md-nav" aria-label="ImpalaTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.client.ImpalaTable.load_data" class="md-nav__link">
    load_data()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parquet-and-other-session-options" class="md-nav__link">
    Parquet and other session options
  </a>
  
    <nav class="md-nav" aria-label="Parquet and other session options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend" class="md-nav__link">
    Backend
  </a>
  
    <nav class="md-nav" aria-label="Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.disable_codegen" class="md-nav__link">
    disable_codegen()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibis.backends.impala.Backend.get_options" class="md-nav__link">
    get_options()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ingesting-data-from-pandas" class="md-nav__link">
    Ingesting data from pandas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uploading-downloading-data-from-hdfs" class="md-nav__link">
    Uploading / downloading data from HDFS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queries-on-parquet-avro-and-delimited-files-in-hdfs" class="md-nav__link">
    Queries on Parquet, Avro, and Delimited files in HDFS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-helper-functions-for-interacting-with-the-database" class="md-nav__link">
    Other helper functions for interacting with the database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faster-queries-on-small-data-in-impala" class="md-nav__link">
    Faster queries on small data in Impala
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-defined-functions-udf" class="md-nav__link">
    User Defined functions (UDF)
  </a>
  
    <nav class="md-nav" aria-label="User Defined functions (UDF)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-scalar-functions-udfs" class="md-nav__link">
    Using scalar functions (UDFs)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/ibis-project/ibis/edit/master/docs/backends/impala.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="impala"><a href="https://impala.apache.org/">Impala</a></h1>
<p>One goal of Ibis is to provide an integrated Python API for an Impala cluster
without requiring you to switch back and forth between Python code and the
Impala shell (where one would be using a mix of DDL and SQL statements).</p>
<p>If you find an Impala task that you cannot perform with Ibis, please get in
touch on the <a href="http://github.com/ibis-project/ibis">GitHub issue tracker</a>.</p>
<p>While interoperability between the Hadoop / Spark ecosystems and pandas / the
PyData stack is overall poor (but improving), we also show some ways that you
can use pandas with Ibis and Impala.</p>
<h2 id="install">Install</h2>
<p>Install dependencies for Ibis's Impala dialect:</p>
<div class="highlight"><pre><span></span><code>pip install &#39;ibis-framework[impala]&#39;
</code></pre></div>
<p>or</p>
<div class="highlight"><pre><span></span><code>conda install -c conda-forge ibis-impala
</code></pre></div>
<h2 id="connect">Connect</h2>
<p>To create an Ibis client, you must first connect your services and
assemble the client using <code>ibis.impala.connect</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">ibis</span>

<span class="n">hdfs</span> <span class="o">=</span> <span class="n">ibis</span><span class="o">.</span><span class="n">impala</span><span class="o">.</span><span class="n">hdfs_connect</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;impala&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">50070</span><span class="p">)</span>
<span class="n">con</span> <span class="o">=</span> <span class="n">ibis</span><span class="o">.</span><span class="n">impala</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;impala&#39;</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="s1">&#39;ibis_testing&#39;</span><span class="p">,</span> <span class="n">hdfs_client</span><span class="o">=</span><span class="n">hdfs</span><span class="p">)</span>
</code></pre></div>
<p>Both method calls can take <code>auth_mechanism='GSSAPI'</code> or <code>auth_mechanism='LDAP'</code>
to connect to Kerberos clusters. Depending on your cluster setup, this may also
include SSL. See the <code>API reference</code> for more, along with the Impala shell
reference, as the connection semantics are identical.</p>
<p>These methods are available on the Impala client object after connecting to
your HDFS cluster (<code>ibis.impala.hdfs_connect</code>) and connecting to Impala with
<code>ibis.impala.connect</code>. See <code>backends.impala</code> for a tutorial on using this
backend.</p>
<h2 id="database-methods">Database methods</h2>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-class">



<h3 id="ibis.backends.impala.Backend" class="doc doc-heading">
        <code>
Backend            (<a title="ibis.backends.base.sql.BaseSQLBackend" href="../../api/backends/sql/#ibis.backends.base.sql.BaseSQLBackend">BaseSQLBackend</a>)
        </code>



</h3>

    <div class="doc doc-contents first">





  <div class="doc doc-children">







<h4 id="ibis.backends.impala.Backend-methods">Methods</h4>

  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.create_database" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_database</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Create a new Impala database.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>None</code></td>
        <td><p>Database name</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>path</code></td>
        <td><code>None</code></td>
        <td><p>HDFS path where to store the database data; otherwise uses Impala
default</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>force</code></td>
        <td><code>None</code></td>
        <td><p>Forcibly create the database</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.drop_database" class="doc doc-heading">
<code class="highlight language-python"><span class="n">drop_database</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Drop an Impala database.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>None</code></td>
        <td><p>Database name</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>force</code></td>
        <td><code>None</code></td>
        <td><p>If False and there are any tables in this database, raises an
IntegrityError</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.list_databases" class="doc doc-heading">
<code class="highlight language-python"><span class="n">list_databases</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">like</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>List existing databases in the current connection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>like</code></td>
        <td><code>None</code></td>
        <td><p>A pattern in Python's regex format to filter returned database
names.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list[str]</code></td>
      <td><p>The database names that exist in the current connection, that match
the <code>like</code> pattern if provided.</p></td>
    </tr>
  </tbody>
</table>
    </div>

  </div>






  </div>

    </div>

  </div>

<!-- prettier-ignore-end -->

<h2 id="table-methods">Table methods</h2>
<p>The <code>Backend</code> object itself has many helper utility methods. You'll
find the most methods on <code>ImpalaTable</code>.</p>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-class">



<h3 id="ibis.backends.impala.Backend" class="doc doc-heading">
        <code>
Backend            (<a title="ibis.backends.base.sql.BaseSQLBackend" href="../../api/backends/sql/#ibis.backends.base.sql.BaseSQLBackend">BaseSQLBackend</a>)
        </code>



</h3>

    <div class="doc doc-contents first">





  <div class="doc doc-children">







<h4 id="ibis.backends.impala.Backend-methods">Methods</h4>

  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.cache_table" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cache_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pool</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Caches a table in cluster memory in the given pool.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>table_name</code></td>
        <td><code>None</code></td>
        <td><p>Table name</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>None</code></td>
        <td><p>Database name</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>pool</code></td>
        <td><code>None</code></td>
        <td><p>The name of the pool in which to cache the table</p></td>
        <td><code>&#39;default&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">table</span> <span class="o">=</span> <span class="s1">&#39;my_table&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span> <span class="o">=</span> <span class="s1">&#39;operations&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pool</span> <span class="o">=</span> <span class="s1">&#39;op_4GB_pool&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">cache_table</span><span class="p">(</span><span class="s1">&#39;my_table&#39;</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="n">db</span><span class="p">,</span> <span class="n">pool</span><span class="o">=</span><span class="n">pool</span><span class="p">)</span>  <span class="c1"># noqa: E501</span>
</code></pre></div>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.create_table" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">external</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;parquet&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">partition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">like_parquet</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Create a new table in Impala using an Ibis table expression.</p>
<p>This is currently designed for tables whose data is stored in HDFS.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>table_name</code></td>
        <td><code>None</code></td>
        <td><p>Table name</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>obj</code></td>
        <td><code>None</code></td>
        <td><p>If passed, creates table from select statement results</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>schema</code></td>
        <td><code>None</code></td>
        <td><p>Mutually exclusive with obj, creates an empty table with a
particular schema</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>None</code></td>
        <td><p>Database name</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>force</code></td>
        <td><code>None</code></td>
        <td><p>Do not create table if table with indicated name already exists</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>external</code></td>
        <td><code>None</code></td>
        <td><p>Create an external table; Impala will not delete the underlying
data when the table is dropped</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>format</code></td>
        <td><code>None</code></td>
        <td><p>File format</p></td>
        <td><code>&#39;parquet&#39;</code></td>
      </tr>
      <tr>
        <td><code>location</code></td>
        <td><code>None</code></td>
        <td><p>Specify the directory location where Impala reads and writes files
for the table</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>partition</code></td>
        <td><code>None</code></td>
        <td><p>Must pass a schema to use this. Cannot partition from an
expression.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>like_parquet</code></td>
        <td><code>None</code></td>
        <td><p>Can specify instead of a schema</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;new_table_name&#39;</span><span class="p">,</span> <span class="n">table_expr</span><span class="p">)</span>
</code></pre></div>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.drop_table" class="doc doc-heading">
<code class="highlight language-python"><span class="n">drop_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Drop an Impala table.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>table_name</code></td>
        <td><code>None</code></td>
        <td><p>Table name</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>None</code></td>
        <td><p>Database name</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>force</code></td>
        <td><code>None</code></td>
        <td><p>Database may throw exception if table does not exist</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">table</span> <span class="o">=</span> <span class="s1">&#39;my_table&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span> <span class="o">=</span> <span class="s1">&#39;operations&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">drop_table</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="n">db</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.get_options" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Return current query options for the Impala session.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.get_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Return a Schema object for the indicated table and database.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>table_name</code></td>
        <td><code>str</code></td>
        <td><p>Table name</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>str | None</code></td>
        <td><p>Database name</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>sch.Schema</code></td>
      <td><p>Ibis schema</p></td>
    </tr>
  </tbody>
</table>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.insert" class="doc doc-heading">
<code class="highlight language-python"><span class="n">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">partition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Insert data into an existing table.</p>
<p>See
<a href="#ibis.backends.impala.client.ImpalaTable.insert"><code>ImpalaTable.insert</code></a>
for parameters.</p>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">table</span> <span class="o">=</span> <span class="s1">&#39;my_table&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">table_expr</span><span class="p">)</span>
</code></pre></div>
    <p>Completely overwrite contents</p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">table_expr</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.invalidate_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">invalidate_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Issue an <code>INVALIDATE METADATA</code> command.</p>
<p>Optionally this applies to a specific table. See Impala documentation.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str | None</code></td>
        <td><p>Table name. Can be fully qualified (with database)</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>str | None</code></td>
        <td><p>Database name</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.list_tables" class="doc doc-heading">
<code class="highlight language-python"><span class="n">list_tables</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">like</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Return the list of table names in the current database.</p>
<p>For some backends, the tables may be files in a directory,
or other equivalent entities in a SQL database.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>like</code></td>
        <td><code>str</code></td>
        <td><p>A pattern in Python's regex format.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>str</code></td>
        <td><p>The database to list tables of, if not the current one.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list[str]</code></td>
      <td><p>The list of the table names that match the pattern <code>like</code>.</p></td>
    </tr>
  </tbody>
</table>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.load_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">partition</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Loads data into an Impala table by physically moving data files.</p>

    </div>

  </div>





  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.truncate_table" class="doc doc-heading">
<code class="highlight language-python"><span class="n">truncate_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Delete all rows from an existing table.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>table_name</code></td>
        <td><code>None</code></td>
        <td><p>Table name</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>None</code></td>
        <td><p>Database name</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
    </div>

  </div>





  </div>

    </div>

  </div>

<!-- prettier-ignore-end -->

<p>The best way to interact with a single table is through the
<code>ImpalaTable</code> object you get back from <code>Backend.table</code>.</p>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-class">



<h3 id="ibis.backends.impala.client.ImpalaTable" class="doc doc-heading">
        <code>
ImpalaTable            (<a title="ibis.expr.types.relations.TableExpr" href="../../api/expressions/tables/#ibis.expr.types.relations.TableExpr">TableExpr</a>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>A physical table in the Impala-Hive metastore</p>




  <div class="doc doc-children">




<h4 id="ibis.backends.impala.client.ImpalaTable-attributes">Attributes</h4>

  <div class="doc doc-object doc-attribute">



<h5 id="ibis.backends.impala.client.ImpalaTable.is_partitioned" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_partitioned</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>True if the table is partitioned.</p>
    </div>

  </div>




<h4 id="ibis.backends.impala.client.ImpalaTable-methods">Methods</h4>

  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.add_partition" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_partition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spec</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Add a new table partition.</p>
<p>This API creates any necessary new directories in HDFS.</p>
<p>Partition parameters can be set in a single DDL statement or you can
use <code>alter_partition</code> to set them after the fact.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.alter" class="doc doc-heading">
<code class="highlight language-python"><span class="n">alter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tbl_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">serde_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Change settings and parameters of the table.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>location</code></td>
        <td><code>None</code></td>
        <td><p>For partitioned tables, you may want the alter_partition function</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>format</code></td>
        <td><code>None</code></td>
        <td><p>Table format</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>tbl_properties</code></td>
        <td><code>None</code></td>
        <td><p>Table properties</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>serde_properties</code></td>
        <td><code>None</code></td>
        <td><p>Serialization/deserialization properties</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.alter_partition" class="doc doc-heading">
<code class="highlight language-python"><span class="n">alter_partition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spec</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tbl_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">serde_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Change settings and parameters of an existing partition.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>spec</code></td>
        <td><code>None</code></td>
        <td><p>The partition keys for the partition being modified</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>location</code></td>
        <td><code>None</code></td>
        <td><p>Location of the partition</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>format</code></td>
        <td><code>None</code></td>
        <td><p>Table format</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>tbl_properties</code></td>
        <td><code>None</code></td>
        <td><p>Table properties</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>serde_properties</code></td>
        <td><code>None</code></td>
        <td><p>Serialization/deserialization properties</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.column_stats" class="doc doc-heading">
<code class="highlight language-python"><span class="n">column_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Return results of <code>SHOW COLUMN STATS</code>.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>DataFrame</code></td>
      <td><p>Column statistics</p></td>
    </tr>
  </tbody>
</table>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.compute_stats" class="doc doc-heading">
<code class="highlight language-python"><span class="n">compute_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">incremental</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Invoke Impala COMPUTE STATS command on the table.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.describe_formatted" class="doc doc-heading">
<code class="highlight language-python"><span class="n">describe_formatted</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Return results of <code>DESCRIBE FORMATTED</code> statement.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.drop" class="doc doc-heading">
<code class="highlight language-python"><span class="n">drop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Drop the table from the database.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.drop_partition" class="doc doc-heading">
<code class="highlight language-python"><span class="n">drop_partition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Drop an existing table partition.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.files" class="doc doc-heading">
<code class="highlight language-python"><span class="n">files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Return results of SHOW FILES statement.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.insert" class="doc doc-heading">
<code class="highlight language-python"><span class="n">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">partition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Insert into an Impala table.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>obj</code></td>
        <td><code>None</code></td>
        <td><p>Table expression or DataFrame</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>overwrite</code></td>
        <td><code>None</code></td>
        <td><p>If True, will replace existing contents of table</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>partition</code></td>
        <td><code>None</code></td>
        <td><p>For partitioned tables, indicate the partition that's being
inserted into, either with an ordered list of partition keys or a
dict of partition field name to value. For example for the
partition (year=2007, month=7), this can be either (2007, 7) or
{'year': 2007, 'month': 7}.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>validate</code></td>
        <td><code>None</code></td>
        <td><p>If True, do more rigorous validation that schema of table being
inserted is compatible with the existing table</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">table_expr</span><span class="p">)</span>
</code></pre></div>
    <p>Completely overwrite contents</p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">table_expr</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.load_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">partition</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Load data into an Impala table.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>path</code></td>
        <td><code>None</code></td>
        <td><p>Data to load</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>overwrite</code></td>
        <td><code>None</code></td>
        <td><p>Overwrite the existing data in the entire table or indicated
partition</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>partition</code></td>
        <td><code>None</code></td>
        <td><p>If specified, the partition must already exist</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Return results of <code>DESCRIBE FORMATTED</code> statement.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.partition_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">partition_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Return the schema for the partition columns.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.partitions" class="doc doc-heading">
<code class="highlight language-python"><span class="n">partitions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Return information about the table's partitions.</p>
<p>Raises an exception if the table is not partitioned.</p>

    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.rename" class="doc doc-heading">
<code class="highlight language-python"><span class="n">rename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_name</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Rename table inside Impala.</p>
<p>References to the old table are no longer valid.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.stats" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Return results of <code>SHOW TABLE STATS</code>.</p>
<p>If not partitioned, contains only one row.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>DataFrame</code></td>
      <td><p>Table statistics</p></td>
    </tr>
  </tbody>
</table>
    </div>

  </div>





  </div>

    </div>

  </div>

<!-- prettier-ignore-end -->

<h2 id="creating-views">Creating views</h2>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-class">



<h3 id="ibis.backends.impala.Backend" class="doc doc-heading">
        <code>
Backend            (<a title="ibis.backends.base.sql.BaseSQLBackend" href="../../api/backends/sql/#ibis.backends.base.sql.BaseSQLBackend">BaseSQLBackend</a>)
        </code>



</h3>

    <div class="doc doc-contents first">





  <div class="doc doc-children">







<h4 id="ibis.backends.impala.Backend-methods">Methods</h4>

  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.create_view" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Create an Impala view from a table expression.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>None</code></td>
        <td><p>View name</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>expr</code></td>
        <td><code>ibis TableExpr</code></td>
        <td><p>Ibis table expression</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>None</code></td>
        <td><p>Database name</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.drop_table_or_view" class="doc doc-heading">
<code class="highlight language-python"><span class="n">drop_table_or_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Drop view or table.</p>

    </div>

  </div>





  </div>

    </div>

  </div>

<!-- prettier-ignore-end -->

<h2 id="accessing-data-formats-in-hdfs">Accessing data formats in HDFS</h2>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-class">



<h3 id="ibis.backends.impala.Backend" class="doc doc-heading">
        <code>
Backend            (<a title="ibis.backends.base.sql.BaseSQLBackend" href="../../api/backends/sql/#ibis.backends.base.sql.BaseSQLBackend">BaseSQLBackend</a>)
        </code>



</h3>

    <div class="doc doc-contents first">





  <div class="doc doc-children">







<h4 id="ibis.backends.impala.Backend-methods">Methods</h4>

  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.avro_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">avro_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hdfs_dir</span><span class="p">,</span> <span class="n">avro_schema</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">external</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">persist</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Create a table to read a collection of Avro data.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>hdfs_dir</code></td>
        <td><code>None</code></td>
        <td><p>Absolute HDFS path to directory containing avro files</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>avro_schema</code></td>
        <td><code>None</code></td>
        <td><p>The Avro schema for the data as a Python dict</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>None</code></td>
        <td><p>Table name</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>None</code></td>
        <td><p>Database name</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>external</code></td>
        <td><code>None</code></td>
        <td><p>Whether the table is external</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>persist</code></td>
        <td><code>None</code></td>
        <td><p>Persist the table</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ImpalaTable</code></td>
      <td><p>Impala table expression</p></td>
    </tr>
  </tbody>
</table>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.delimited_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delimited_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hdfs_dir</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">escapechar</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lineterminator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">external</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">persist</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Interpret delimited text files as an Ibis table expression.</p>
<p>See the <code>parquet_file</code> method for more details on what happens under
the hood.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>hdfs_dir</code></td>
        <td><code>None</code></td>
        <td><p>HDFS directory containing delimited text files</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>schema</code></td>
        <td><code>None</code></td>
        <td><p>Ibis schema</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>None</code></td>
        <td><p>Name for temporary or persistent table; otherwise random names are
generated</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>None</code></td>
        <td><p>Database to create the table in</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>delimiter</code></td>
        <td><code>None</code></td>
        <td><p>Character used to delimit columns</p></td>
        <td><code>&#39;,&#39;</code></td>
      </tr>
      <tr>
        <td><code>escapechar</code></td>
        <td><code>None</code></td>
        <td><p>Character used to escape special characters</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>lineterminator</code></td>
        <td><code>None</code></td>
        <td><p>Character used to delimit lines</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>external</code></td>
        <td><code>None</code></td>
        <td><p>Create table as EXTERNAL (data will not be deleted on drop). Not
that if persist=False and external=False, whatever data you
reference will be deleted</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>persist</code></td>
        <td><code>None</code></td>
        <td><p>If True, do not delete the table upon garbage collection of ibis
table object</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ImpalaTable</code></td>
      <td><p>Impala table expression</p></td>
    </tr>
  </tbody>
</table>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.parquet_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parquet_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hdfs_dir</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">external</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">like_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">like_table</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">persist</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Make indicated parquet file in HDFS available as an Ibis table.</p>
<p>The table created can be optionally named and persisted, otherwise a
unique name will be generated. Temporarily, for any non-persistent
external table created by Ibis we will attempt to drop it when the
underlying object is garbage collected (or the Python interpreter shuts
down normally).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>hdfs_dir</code></td>
        <td><code>None</code></td>
        <td><p>Path in HDFS</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>schema</code></td>
        <td><code>None</code></td>
        <td><p>If no schema provided, and neither of the like_* argument is
passed, one will be inferred from one of the parquet files in the
directory.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>like_file</code></td>
        <td><code>None</code></td>
        <td><p>Absolute path to Parquet file in HDFS to use for schema
definitions. An alternative to having to supply an explicit schema</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>like_table</code></td>
        <td><code>None</code></td>
        <td><p>Fully scoped and escaped string to an Impala table whose schema we
will use for the newly created table.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>None</code></td>
        <td><p>Random unique name generated otherwise</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>None</code></td>
        <td><p>Database to create the (possibly temporary) table in</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>external</code></td>
        <td><code>None</code></td>
        <td><p>If a table is external, the referenced data will not be deleted
when the table is dropped in Impala. Otherwise (external=False)
Impala takes ownership of the Parquet file.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>persist</code></td>
        <td><code>None</code></td>
        <td><p>Do not drop the table during garbage collection</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ImpalaTable</code></td>
      <td><p>Impala table expression</p></td>
    </tr>
  </tbody>
</table>
    </div>

  </div>





  </div>

    </div>

  </div>

<!-- prettier-ignore-end -->

<h2 id="hdfs-interaction">HDFS Interaction</h2>
<p>Ibis delegates all HDFS interaction to the
<a href="https://filesystem-spec.readthedocs.io/en/latest/"><code>fsspec</code></a> library.</p>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-function">



<h3 id="ibis.backends.impala.hdfs.hdfs_connect" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hdfs_connect</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="s1">&#39;webhdfs&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents first">

      <p>Connect to HDFS using <code>fsspec</code>.</p>
<p>This function is a thing wrapper around <code>fsspec.filesystem</code>. All arguments
are forwarded to that API.</p>

    </div>

  </div>

<!-- prettier-ignore-end -->

<h2 id="the-impala-client-object">The Impala client object</h2>
<p>To use Ibis with Impala, you first must connect to a cluster using the
<code>ibis.impala.connect</code> function, optionally supplying an HDFS connection:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">ibis</span>

<span class="n">hdfs</span> <span class="o">=</span> <span class="n">ibis</span><span class="o">.</span><span class="n">impala</span><span class="o">.</span><span class="n">hdfs_connect</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">webhdfs_host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">webhdfs_port</span><span class="p">)</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">ibis</span><span class="o">.</span><span class="n">impala</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">impala_host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">impala_port</span><span class="p">,</span> <span class="n">hdfs_client</span><span class="o">=</span><span class="n">hdfs</span><span class="p">)</span>
</code></pre></div>
<p>All examples here use the following block of code to connect to impala
using docker:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">ibis</span>

<span class="n">hdfs</span> <span class="o">=</span> <span class="n">ibis</span><span class="o">.</span><span class="n">impala</span><span class="o">.</span><span class="n">hdfs_connect</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">50070</span><span class="p">)</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">ibis</span><span class="o">.</span><span class="n">impala</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span> <span class="n">hdfs_client</span><span class="o">=</span><span class="n">hdfs</span><span class="p">)</span>
</code></pre></div>
<p>You can accomplish many tasks directly through the client object, but we
additionally provide APIs to streamline tasks involving a single Impala
table or database.</p>
<h2 id="table-objects">Table objects</h2>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-method">



<h3 id="ibis.backends.base.sql.Backend.table" class="doc doc-heading">
<code class="highlight language-python"><span class="n">table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents first">

      <p>Construct a table expression.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>Table name</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>str | None</code></td>
        <td><p>Database name</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ir.TableExpr</code></td>
      <td><p>Table expression</p></td>
    </tr>
  </tbody>
</table>
    </div>

  </div>

<!-- prettier-ignore-end -->

<p>The client's <code>table</code> method allows you to create an Ibis table
expression referencing a physical Impala table:</p>
<div class="highlight"><pre><span></span><code><span class="n">table</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;functional_alltypes&#39;</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="s1">&#39;ibis_testing&#39;</span><span class="p">)</span>
</code></pre></div>
<p><code>ImpalaTable</code> is a Python subclass of the more general Ibis <code>TableExpr</code>
that has additional Impala-specific methods. So you can use it
interchangeably with any code expecting a <code>TableExpr</code>.</p>
<p>Like all table expressions in Ibis, <code>ImpalaTable</code> has a <code>schema</code> method
you can use to examine its schema:</p>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-class">



<h3 id="ibis.backends.impala.client.ImpalaTable" class="doc doc-heading">
        <code>
ImpalaTable            (<a title="ibis.expr.types.relations.TableExpr" href="../../api/expressions/tables/#ibis.expr.types.relations.TableExpr">TableExpr</a>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>A physical table in the Impala-Hive metastore</p>



    </div>

  </div>

<!-- prettier-ignore-end -->

<p>While the client has a <code>drop_table</code> method you can use to drop tables,
the table itself has a method <code>drop</code> that you can use:</p>
<div class="highlight"><pre><span></span><code><span class="n">table</span><span class="o">.</span><span class="n">drop</span><span class="p">()</span>
</code></pre></div>
<h2 id="expression-execution">Expression execution</h2>
<p>Ibis expressions have an <code>execute</code> method with compiles and runs the
expressions on Impala or whichever backend is being referenced.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">fa</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">functional_alltypes</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">expr</span> <span class="o">=</span> <span class="n">fa</span><span class="o">.</span><span class="n">double_col</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">expr</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="mf">331785.00000000006</span>
</code></pre></div>
<p>For longer-running queries, Ibis will attempt to cancel the query in
progress if an interrupt is received.</p>
<h2 id="creating-tables">Creating tables</h2>
<p>There are several ways to create new Impala tables:</p>
<ul>
<li>From an Ibis table expression</li>
<li>Empty, from a declared schema</li>
<li>Empty and partitioned</li>
</ul>
<p>In all cases, you should use the <code>create_table</code> method either on the
top-level client connection or a database object.</p>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-method">



<h3 id="ibis.backends.impala.Backend.create_table" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">external</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;parquet&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">partition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">like_parquet</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents first">

      <p>Create a new table in Impala using an Ibis table expression.</p>
<p>This is currently designed for tables whose data is stored in HDFS.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>table_name</code></td>
        <td><code>None</code></td>
        <td><p>Table name</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>obj</code></td>
        <td><code>None</code></td>
        <td><p>If passed, creates table from select statement results</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>schema</code></td>
        <td><code>None</code></td>
        <td><p>Mutually exclusive with obj, creates an empty table with a
particular schema</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>None</code></td>
        <td><p>Database name</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>force</code></td>
        <td><code>None</code></td>
        <td><p>Do not create table if table with indicated name already exists</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>external</code></td>
        <td><code>None</code></td>
        <td><p>Create an external table; Impala will not delete the underlying
data when the table is dropped</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>format</code></td>
        <td><code>None</code></td>
        <td><p>File format</p></td>
        <td><code>&#39;parquet&#39;</code></td>
      </tr>
      <tr>
        <td><code>location</code></td>
        <td><code>None</code></td>
        <td><p>Specify the directory location where Impala reads and writes files
for the table</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>partition</code></td>
        <td><code>None</code></td>
        <td><p>Must pass a schema to use this. Cannot partition from an
expression.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>like_parquet</code></td>
        <td><code>None</code></td>
        <td><p>Can specify instead of a schema</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;new_table_name&#39;</span><span class="p">,</span> <span class="n">table_expr</span><span class="p">)</span>
</code></pre></div>

    </div>

  </div>

<!-- prettier-ignore-end -->

<h3 id="creating-tables-from-a-table-expression">Creating tables from a table expression</h3>
<p>If you pass an Ibis expression to <code>create_table</code>, Ibis issues a
<code>CREATE TABLE ... AS SELECT</code> (CTAS) statement:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">table</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;functional_alltypes&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">expr</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">&#39;string_col&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;string_freqs&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;parquet&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">freqs</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;string_freqs&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">freqs</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
  <span class="n">string_col</span>  <span class="n">count</span>
<span class="mi">0</span>          <span class="mi">9</span>    <span class="mi">730</span>
<span class="mi">1</span>          <span class="mi">3</span>    <span class="mi">730</span>
<span class="mi">2</span>          <span class="mi">6</span>    <span class="mi">730</span>
<span class="mi">3</span>          <span class="mi">4</span>    <span class="mi">730</span>
<span class="mi">4</span>          <span class="mi">1</span>    <span class="mi">730</span>
<span class="mi">5</span>          <span class="mi">8</span>    <span class="mi">730</span>
<span class="mi">6</span>          <span class="mi">2</span>    <span class="mi">730</span>
<span class="mi">7</span>          <span class="mi">7</span>    <span class="mi">730</span>
<span class="mi">8</span>          <span class="mi">5</span>    <span class="mi">730</span>
<span class="mi">9</span>          <span class="mi">0</span>    <span class="mi">730</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">files</span> <span class="o">=</span> <span class="n">freqs</span><span class="o">.</span><span class="n">files</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">files</span>
                                                <span class="n">Path</span>  <span class="n">Size</span> <span class="n">Partition</span>
<span class="mi">0</span>  <span class="n">hdfs</span><span class="p">:</span><span class="o">//</span><span class="n">impala</span><span class="p">:</span><span class="mi">8020</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">hive</span><span class="o">/</span><span class="n">warehouse</span><span class="o">/</span><span class="n">ibis_te</span><span class="o">...</span>  <span class="mi">584</span><span class="n">B</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">freqs</span><span class="o">.</span><span class="n">drop</span><span class="p">()</span>
</code></pre></div>
<p>You can also choose to create an empty table and use <code>insert</code> (see
below).</p>
<h3 id="creating-an-empty-table">Creating an empty table</h3>
<p>To create an empty table, you must declare an Ibis schema that will be
translated to the appopriate Impala schema and data types.</p>
<p>As Ibis types are simplified compared with Impala types, this may expand
in the future to include a more fine-grained schema declaration.</p>
<p>You can use the <code>create_table</code> method either on a database or client
object.</p>
<div class="highlight"><pre><span></span><code><span class="n">schema</span> <span class="o">=</span> <span class="n">ibis</span><span class="o">.</span><span class="n">schema</span><span class="p">([(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;int32&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;int16&#39;</span><span class="p">)])</span>
<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;new_table&#39;</span>
<span class="n">db</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">)</span>
</code></pre></div>
<p>By default, this stores the data files in the database default location.
You can force a particular path with the <code>location</code> option.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">getpass</span> <span class="kn">import</span> <span class="n">getuser</span>
<span class="n">schema</span> <span class="o">=</span> <span class="n">ibis</span><span class="o">.</span><span class="n">schema</span><span class="p">([(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;int32&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;int16&#39;</span><span class="p">)])</span>
<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;new_table&#39;</span>
<span class="n">location</span> <span class="o">=</span> <span class="s1">&#39;/home/</span><span class="si">{}</span><span class="s1">/new-table-data&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">getuser</span><span class="p">())</span>
<span class="n">db</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</code></pre></div>
<p>If the schema matches a known table schema, you can always use the
<code>schema</code> method to get a schema object:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;functional_alltypes&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">schema</span><span class="p">()</span>
<span class="n">ibis</span><span class="o">.</span><span class="n">Schema</span> <span class="p">{</span>
  <span class="nb">id</span>               <span class="n">int32</span>
  <span class="n">bool_col</span>         <span class="n">boolean</span>
  <span class="n">tinyint_col</span>      <span class="n">int8</span>
  <span class="n">smallint_col</span>     <span class="n">int16</span>
  <span class="n">int_col</span>          <span class="n">int32</span>
  <span class="n">bigint_col</span>       <span class="n">int64</span>
  <span class="n">float_col</span>        <span class="n">float32</span>
  <span class="n">double_col</span>       <span class="n">float64</span>
  <span class="n">date_string_col</span>  <span class="n">string</span>
  <span class="n">string_col</span>       <span class="n">string</span>
  <span class="n">timestamp_col</span>    <span class="n">timestamp</span>
  <span class="n">year</span>             <span class="n">int32</span>
  <span class="n">month</span>            <span class="n">int32</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="creating-a-partitioned-table">Creating a partitioned table</h3>
<p>To create an empty partitioned table, include a list of columns to be
used as the partition keys.</p>
<div class="highlight"><pre><span></span><code><span class="n">schema</span> <span class="o">=</span> <span class="n">ibis</span><span class="o">.</span><span class="n">schema</span><span class="p">([(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;int32&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;int16&#39;</span><span class="p">)])</span>
<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;new_table&#39;</span>
<span class="n">db</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span> <span class="n">partition</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;month&#39;</span><span class="p">])</span>
</code></pre></div>
<h2 id="partitioned-tables">Partitioned tables</h2>
<p>Ibis enables you to manage partitioned tables in various ways. Since
each partition behaves as its own \"subtable\" sharing a common schema,
each partition can have its own file format, directory path,
serialization properties, and so forth.</p>
<p>There are a handful of table methods for adding and removing partitions
and getting information about the partition schema and any existing
partition data:</p>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-class">



<h3 id="ibis.backends.impala.client.ImpalaTable" class="doc doc-heading">
        <code>
ImpalaTable            (<a title="ibis.expr.types.relations.TableExpr" href="../../api/expressions/tables/#ibis.expr.types.relations.TableExpr">TableExpr</a>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>A physical table in the Impala-Hive metastore</p>




  <div class="doc doc-children">




<h4 id="ibis.backends.impala.client.ImpalaTable-attributes">Attributes</h4>

  <div class="doc doc-object doc-attribute">



<h5 id="ibis.backends.impala.client.ImpalaTable.is_partitioned" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_partitioned</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>True if the table is partitioned.</p>
    </div>

  </div>




<h4 id="ibis.backends.impala.client.ImpalaTable-methods">Methods</h4>

  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.add_partition" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_partition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spec</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Add a new table partition.</p>
<p>This API creates any necessary new directories in HDFS.</p>
<p>Partition parameters can be set in a single DDL statement or you can
use <code>alter_partition</code> to set them after the fact.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.drop_partition" class="doc doc-heading">
<code class="highlight language-python"><span class="n">drop_partition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Drop an existing table partition.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.partition_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">partition_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Return the schema for the partition columns.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.partitions" class="doc doc-heading">
<code class="highlight language-python"><span class="n">partitions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Return information about the table's partitions.</p>
<p>Raises an exception if the table is not partitioned.</p>

    </div>

  </div>





  </div>

    </div>

  </div>

<!-- prettier-ignore-end -->

<p>To address a specific partition in any method that is partition
specific, you can either use a dict with the partition key names and
values, or pass a list of the partition values:</p>
<div class="highlight"><pre><span></span><code><span class="n">schema</span> <span class="o">=</span> <span class="n">ibis</span><span class="o">.</span><span class="n">schema</span><span class="p">([(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;int32&#39;</span><span class="p">),</span>
                      <span class="p">(</span><span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;int16&#39;</span><span class="p">)])</span>
<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;new_table&#39;</span>
<span class="n">db</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span> <span class="n">partition</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;month&#39;</span><span class="p">])</span>

<span class="n">table</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

<span class="n">table</span><span class="o">.</span><span class="n">add_partition</span><span class="p">({</span><span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="mi">2007</span><span class="p">,</span> <span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">})</span>
<span class="n">table</span><span class="o">.</span><span class="n">add_partition</span><span class="p">([</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="n">table</span><span class="o">.</span><span class="n">add_partition</span><span class="p">([</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>

<span class="n">table</span><span class="o">.</span><span class="n">drop_partition</span><span class="p">([</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
</code></pre></div>
<p>We'll cover partition metadata management and data loading below.</p>
<h2 id="inserting-data-into-tables">Inserting data into tables</h2>
<p>If the schemas are compatible, you can insert into a table directly from
an Ibis table expression:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">functional_alltypes</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;insert_test&#39;</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">schema</span><span class="p">())</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">target</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;insert_test&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">target</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">t</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">target</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">t</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">target</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">t</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">target</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
     <span class="nb">id</span>  <span class="n">bool_col</span>  <span class="n">tinyint_col</span>  <span class="o">...</span>           <span class="n">timestamp_col</span>  <span class="n">year</span>  <span class="n">month</span>
<span class="mi">0</span>  <span class="mi">5770</span>      <span class="kc">True</span>            <span class="mi">0</span>  <span class="o">...</span> <span class="mi">2010</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000</span>  <span class="mi">2010</span>      <span class="mi">8</span>
<span class="mi">1</span>  <span class="mi">5771</span>     <span class="kc">False</span>            <span class="mi">1</span>  <span class="o">...</span> <span class="mi">2010</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">00.000</span>  <span class="mi">2010</span>      <span class="mi">8</span>
<span class="mi">2</span>  <span class="mi">5772</span>      <span class="kc">True</span>            <span class="mi">2</span>  <span class="o">...</span> <span class="mi">2010</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mf">00.100</span>  <span class="mi">2010</span>      <span class="mi">8</span>
<span class="mi">3</span>  <span class="mi">5770</span>      <span class="kc">True</span>            <span class="mi">0</span>  <span class="o">...</span> <span class="mi">2010</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000</span>  <span class="mi">2010</span>      <span class="mi">8</span>
<span class="mi">4</span>  <span class="mi">5771</span>     <span class="kc">False</span>            <span class="mi">1</span>  <span class="o">...</span> <span class="mi">2010</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">00.000</span>  <span class="mi">2010</span>      <span class="mi">8</span>
<span class="mi">5</span>  <span class="mi">5772</span>      <span class="kc">True</span>            <span class="mi">2</span>  <span class="o">...</span> <span class="mi">2010</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mf">00.100</span>  <span class="mi">2010</span>      <span class="mi">8</span>
<span class="mi">6</span>  <span class="mi">5770</span>      <span class="kc">True</span>            <span class="mi">0</span>  <span class="o">...</span> <span class="mi">2010</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000</span>  <span class="mi">2010</span>      <span class="mi">8</span>
<span class="mi">7</span>  <span class="mi">5771</span>     <span class="kc">False</span>            <span class="mi">1</span>  <span class="o">...</span> <span class="mi">2010</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mf">00.000</span>  <span class="mi">2010</span>      <span class="mi">8</span>
<span class="mi">8</span>  <span class="mi">5772</span>      <span class="kc">True</span>            <span class="mi">2</span>  <span class="o">...</span> <span class="mi">2010</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mf">00.100</span>  <span class="mi">2010</span>      <span class="mi">8</span>

<span class="p">[</span><span class="mi">9</span> <span class="n">rows</span> <span class="n">x</span> <span class="mi">13</span> <span class="n">columns</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">target</span><span class="o">.</span><span class="n">drop</span><span class="p">()</span>
</code></pre></div>
<p>If the table is partitioned, you must indicate the partition you are
inserting into:</p>
<div class="highlight"><pre><span></span><code><span class="n">part</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="mi">2007</span><span class="p">,</span> <span class="s1">&#39;month&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">partition</span><span class="o">=</span><span class="n">part</span><span class="p">)</span>
</code></pre></div>
<h2 id="managing-table-metadata">Managing table metadata</h2>
<p>Ibis has functions that wrap many of the DDL commands for Impala table
metadata.</p>
<h3 id="detailed-table-metadata-describe-formatted">Detailed table metadata: <code>DESCRIBE FORMATTED</code></h3>
<p>To get a handy wrangled version of <code>DESCRIBE FORMATTED</code> use the
<code>metadata</code> method.</p>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-method">



<h3 id="ibis.backends.impala.client.ImpalaTable.metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents first">

      <p>Return results of <code>DESCRIBE FORMATTED</code> statement.</p>

    </div>

  </div>

<!-- prettier-ignore-end -->

<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;ibis_testing.functional_alltypes&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">meta</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">metadata</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">meta</span>
<span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">ibis</span><span class="o">.</span><span class="n">backends</span><span class="o">.</span><span class="n">impala</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">TableMetadata</span><span class="s1">&#39;&gt;</span>
<span class="p">{</span><span class="s1">&#39;info&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;CreateTime&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
          <span class="s1">&#39;Database&#39;</span><span class="p">:</span> <span class="s1">&#39;ibis_testing&#39;</span><span class="p">,</span>
          <span class="s1">&#39;LastAccessTime&#39;</span><span class="p">:</span> <span class="s1">&#39;UNKNOWN&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Location&#39;</span><span class="p">:</span> <span class="s1">&#39;hdfs://impala:8020/__ibis/ibis-testing-data/parquet/functional_alltypes&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Owner&#39;</span><span class="p">:</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Protect Mode&#39;</span><span class="p">:</span> <span class="s1">&#39;None&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Retention&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s1">&#39;Table Parameters&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;COLUMN_STATS_ACCURATE&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                               <span class="s1">&#39;EXTERNAL&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                               <span class="s1">&#39;STATS_GENERATED_VIA_STATS_TASK&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                               <span class="s1">&#39;numFiles&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                               <span class="s1">&#39;numRows&#39;</span><span class="p">:</span> <span class="mi">7300</span><span class="p">,</span>
                               <span class="s1">&#39;rawDataSize&#39;</span><span class="p">:</span> <span class="s1">&#39;-1&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;totalSize&#39;</span><span class="p">:</span> <span class="mi">106278</span><span class="p">,</span>
                               <span class="s1">&#39;transient_lastDdlTime&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">17</span><span class="p">)},</span>
          <span class="s1">&#39;Table Type&#39;</span><span class="p">:</span> <span class="s1">&#39;EXTERNAL_TABLE&#39;</span><span class="p">},</span>
 <span class="s1">&#39;schema&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;int&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;bool_col&#39;</span><span class="p">,</span> <span class="s1">&#39;boolean&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;tinyint_col&#39;</span><span class="p">,</span> <span class="s1">&#39;tinyint&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;smallint_col&#39;</span><span class="p">,</span> <span class="s1">&#39;smallint&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;int_col&#39;</span><span class="p">,</span> <span class="s1">&#39;int&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;bigint_col&#39;</span><span class="p">,</span> <span class="s1">&#39;bigint&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;float_col&#39;</span><span class="p">,</span> <span class="s1">&#39;float&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;double_col&#39;</span><span class="p">,</span> <span class="s1">&#39;double&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;date_string_col&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;string_col&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;timestamp_col&#39;</span><span class="p">,</span> <span class="s1">&#39;timestamp&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;int&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;int&#39;</span><span class="p">)],</span>
 <span class="s1">&#39;storage info&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Bucket Columns&#39;</span><span class="p">:</span> <span class="s1">&#39;[]&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;Compressed&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                  <span class="s1">&#39;InputFormat&#39;</span><span class="p">:</span> <span class="s1">&#39;org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;Num Buckets&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                  <span class="s1">&#39;OutputFormat&#39;</span><span class="p">:</span> <span class="s1">&#39;org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;SerDe Library&#39;</span><span class="p">:</span> <span class="s1">&#39;org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;Sort Columns&#39;</span><span class="p">:</span> <span class="s1">&#39;[]&#39;</span><span class="p">}}</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">meta</span><span class="o">.</span><span class="n">location</span>
<span class="s1">&#39;hdfs://impala:8020/__ibis/ibis-testing-data/parquet/functional_alltypes&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">meta</span><span class="o">.</span><span class="n">create_time</span>
<span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</code></pre></div>
<p>The <code>files</code> function is also available to see all of the physical HDFS
data files backing a table:</p>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-class">



<h3 id="ibis.backends.impala.client.ImpalaTable" class="doc doc-heading">
        <code>
ImpalaTable            (<a title="ibis.expr.types.relations.TableExpr" href="../../api/expressions/tables/#ibis.expr.types.relations.TableExpr">TableExpr</a>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>A physical table in the Impala-Hive metastore</p>




  <div class="doc doc-children">







<h4 id="ibis.backends.impala.client.ImpalaTable-methods">Methods</h4>

  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.files" class="doc doc-heading">
<code class="highlight language-python"><span class="n">files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Return results of SHOW FILES statement.</p>

    </div>

  </div>





  </div>

    </div>

  </div>

<!-- prettier-ignore-end -->

<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">ss</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;tpcds_parquet.store_sales&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">ss</span><span class="o">.</span><span class="n">files</span><span class="p">()[:</span><span class="mi">5</span><span class="p">]</span>
                                                <span class="n">path</span>      <span class="n">size</span>  \
<span class="mi">0</span>  <span class="n">hdfs</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">20500</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">warehouse</span><span class="o">/</span><span class="n">tpcds</span><span class="o">.</span><span class="n">st</span><span class="o">...</span>  <span class="mf">160.61</span><span class="n">KB</span>
<span class="mi">1</span>  <span class="n">hdfs</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">20500</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">warehouse</span><span class="o">/</span><span class="n">tpcds</span><span class="o">.</span><span class="n">st</span><span class="o">...</span>  <span class="mf">123.88</span><span class="n">KB</span>
<span class="mi">2</span>  <span class="n">hdfs</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">20500</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">warehouse</span><span class="o">/</span><span class="n">tpcds</span><span class="o">.</span><span class="n">st</span><span class="o">...</span>  <span class="mf">139.28</span><span class="n">KB</span>
<span class="mi">3</span>  <span class="n">hdfs</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">20500</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">warehouse</span><span class="o">/</span><span class="n">tpcds</span><span class="o">.</span><span class="n">st</span><span class="o">...</span>  <span class="mf">139.60</span><span class="n">KB</span>
<span class="mi">4</span>  <span class="n">hdfs</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">20500</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">warehouse</span><span class="o">/</span><span class="n">tpcds</span><span class="o">.</span><span class="n">st</span><span class="o">...</span>   <span class="mf">62.84</span><span class="n">KB</span>

                 <span class="n">partition</span>
<span class="mi">0</span>  <span class="n">ss_sold_date_sk</span><span class="o">=</span><span class="mi">2451803</span>
<span class="mi">1</span>  <span class="n">ss_sold_date_sk</span><span class="o">=</span><span class="mi">2451819</span>
<span class="mi">2</span>  <span class="n">ss_sold_date_sk</span><span class="o">=</span><span class="mi">2451772</span>
<span class="mi">3</span>  <span class="n">ss_sold_date_sk</span><span class="o">=</span><span class="mi">2451789</span>
<span class="mi">4</span>  <span class="n">ss_sold_date_sk</span><span class="o">=</span><span class="mi">2451741</span>
</code></pre></div>
<h3 id="modifying-table-metadata">Modifying table metadata</h3>
<p>For unpartitioned tables, you can use the <code>alter</code> method to change its
location, file format, and other properties. For partitioned tables, to
change partition-specific metadata use <code>alter_partition</code>.</p>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-class">



<h3 id="ibis.backends.impala.client.ImpalaTable" class="doc doc-heading">
        <code>
ImpalaTable            (<a title="ibis.expr.types.relations.TableExpr" href="../../api/expressions/tables/#ibis.expr.types.relations.TableExpr">TableExpr</a>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>A physical table in the Impala-Hive metastore</p>




  <div class="doc doc-children">







<h4 id="ibis.backends.impala.client.ImpalaTable-methods">Methods</h4>

  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.alter" class="doc doc-heading">
<code class="highlight language-python"><span class="n">alter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tbl_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">serde_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Change settings and parameters of the table.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>location</code></td>
        <td><code>None</code></td>
        <td><p>For partitioned tables, you may want the alter_partition function</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>format</code></td>
        <td><code>None</code></td>
        <td><p>Table format</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>tbl_properties</code></td>
        <td><code>None</code></td>
        <td><p>Table properties</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>serde_properties</code></td>
        <td><code>None</code></td>
        <td><p>Serialization/deserialization properties</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.alter_partition" class="doc doc-heading">
<code class="highlight language-python"><span class="n">alter_partition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spec</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tbl_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">serde_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Change settings and parameters of an existing partition.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>spec</code></td>
        <td><code>None</code></td>
        <td><p>The partition keys for the partition being modified</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>location</code></td>
        <td><code>None</code></td>
        <td><p>Location of the partition</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>format</code></td>
        <td><code>None</code></td>
        <td><p>Table format</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>tbl_properties</code></td>
        <td><code>None</code></td>
        <td><p>Table properties</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>serde_properties</code></td>
        <td><code>None</code></td>
        <td><p>Serialization/deserialization properties</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
    </div>

  </div>





  </div>

    </div>

  </div>

<!-- prettier-ignore-end -->

<p>For example, if you wanted to \"point\" an existing table at a directory
of CSV files, you could run the following command:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">getpass</span> <span class="kn">import</span> <span class="n">getuser</span>

<span class="n">csv_props</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;serialization.format&#39;</span><span class="p">:</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span>
    <span class="s1">&#39;field.delim&#39;</span><span class="p">:</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">data_dir</span> <span class="o">=</span> <span class="s1">&#39;/home/</span><span class="si">{}</span><span class="s1">/my-csv-files&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">getuser</span><span class="p">())</span>

<span class="n">table</span><span class="o">.</span><span class="n">alter</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">data_dir</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">serde_properties</span><span class="o">=</span><span class="n">csv_props</span><span class="p">)</span>
</code></pre></div>
<p>If the table is partitioned, you can modify only the properties of a
particular partition:</p>
<div class="highlight"><pre><span></span><code><span class="n">table</span><span class="o">.</span><span class="n">alter_partition</span><span class="p">(</span>
    <span class="p">{</span><span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="mi">2007</span><span class="p">,</span> <span class="s1">&#39;month&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">},</span>
    <span class="n">location</span><span class="o">=</span><span class="n">data_dir</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="p">,</span>
    <span class="n">serde_properties</span><span class="o">=</span><span class="n">csv_props</span>
<span class="p">)</span>
</code></pre></div>
<h2 id="table-statistics">Table statistics</h2>
<h3 id="computing-table-and-partition-statistics">Computing table and partition statistics</h3>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-class">



<h3 id="ibis.backends.impala.client.ImpalaTable" class="doc doc-heading">
        <code>
ImpalaTable            (<a title="ibis.expr.types.relations.TableExpr" href="../../api/expressions/tables/#ibis.expr.types.relations.TableExpr">TableExpr</a>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>A physical table in the Impala-Hive metastore</p>




  <div class="doc doc-children">







<h4 id="ibis.backends.impala.client.ImpalaTable-methods">Methods</h4>

  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.compute_stats" class="doc doc-heading">
<code class="highlight language-python"><span class="n">compute_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">incremental</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Invoke Impala COMPUTE STATS command on the table.</p>

    </div>

  </div>





  </div>

    </div>

  </div>

<!-- prettier-ignore-end -->

<p>Impala-backed physical tables have a method <code>compute_stats</code> that
computes table, column, and partition-level statistics to assist with
query planning and optimization. It is standard practice to invoke this
after creating a table or loading new data:</p>
<div class="highlight"><pre><span></span><code><span class="n">table</span><span class="o">.</span><span class="n">compute_stats</span><span class="p">()</span>
</code></pre></div>
<p>If you are using a recent version of Impala, you can also access the
<code>COMPUTE INCREMENTAL STATS</code> DDL command:</p>
<div class="highlight"><pre><span></span><code><span class="n">table</span><span class="o">.</span><span class="n">compute_stats</span><span class="p">(</span><span class="n">incremental</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<h3 id="seeing-table-and-column-statistics">Seeing table and column statistics</h3>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-class">



<h3 id="ibis.backends.impala.client.ImpalaTable" class="doc doc-heading">
        <code>
ImpalaTable            (<a title="ibis.expr.types.relations.TableExpr" href="../../api/expressions/tables/#ibis.expr.types.relations.TableExpr">TableExpr</a>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>A physical table in the Impala-Hive metastore</p>




  <div class="doc doc-children">







<h4 id="ibis.backends.impala.client.ImpalaTable-methods">Methods</h4>

  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.column_stats" class="doc doc-heading">
<code class="highlight language-python"><span class="n">column_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Return results of <code>SHOW COLUMN STATS</code>.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>DataFrame</code></td>
      <td><p>Column statistics</p></td>
    </tr>
  </tbody>
</table>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.stats" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Return results of <code>SHOW TABLE STATS</code>.</p>
<p>If not partitioned, contains only one row.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>DataFrame</code></td>
      <td><p>Table statistics</p></td>
    </tr>
  </tbody>
</table>
    </div>

  </div>





  </div>

    </div>

  </div>

<!-- prettier-ignore-end -->

<p>The <code>compute_stats</code> and <code>stats</code> functions return the results of
<code>SHOW COLUMN STATS</code> and <code>SHOW TABLE STATS</code>, respectively, and their
output will depend, of course, on the last <code>COMPUTE STATS</code> call.</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">ss</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;tpcds_parquet.store_sales&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ss</span><span class="o">.</span><span class="n">compute_stats</span><span class="p">(</span><span class="n">incremental</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">stats</span> <span class="o">=</span> <span class="n">ss</span><span class="o">.</span><span class="n">stats</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">stats</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
  <span class="n">ss_sold_date_sk</span>  <span class="c1">#Rows  #Files     Size Bytes Cached Cache Replication  \</span>
<span class="mi">0</span>         <span class="mi">2450829</span>   <span class="mi">1071</span>       <span class="mi">1</span>  <span class="mf">78.34</span><span class="n">KB</span>   <span class="n">NOT</span> <span class="n">CACHED</span>        <span class="n">NOT</span> <span class="n">CACHED</span>
<span class="mi">1</span>         <span class="mi">2450846</span>    <span class="mi">839</span>       <span class="mi">1</span>  <span class="mf">61.83</span><span class="n">KB</span>   <span class="n">NOT</span> <span class="n">CACHED</span>        <span class="n">NOT</span> <span class="n">CACHED</span>
<span class="mi">2</span>         <span class="mi">2450860</span>    <span class="mi">747</span>       <span class="mi">1</span>  <span class="mf">54.86</span><span class="n">KB</span>   <span class="n">NOT</span> <span class="n">CACHED</span>        <span class="n">NOT</span> <span class="n">CACHED</span>
<span class="mi">3</span>         <span class="mi">2450874</span>    <span class="mi">922</span>       <span class="mi">1</span>  <span class="mf">66.74</span><span class="n">KB</span>   <span class="n">NOT</span> <span class="n">CACHED</span>        <span class="n">NOT</span> <span class="n">CACHED</span>
<span class="mi">4</span>         <span class="mi">2450888</span>    <span class="mi">856</span>       <span class="mi">1</span>  <span class="mf">63.33</span><span class="n">KB</span>   <span class="n">NOT</span> <span class="n">CACHED</span>        <span class="n">NOT</span> <span class="n">CACHED</span>

    <span class="n">Format</span> <span class="n">Incremental</span> <span class="n">stats</span>  \
<span class="mi">0</span>  <span class="n">PARQUET</span>              <span class="n">true</span>
<span class="mi">1</span>  <span class="n">PARQUET</span>              <span class="n">true</span>
<span class="mi">2</span>  <span class="n">PARQUET</span>              <span class="n">true</span>
<span class="mi">3</span>  <span class="n">PARQUET</span>              <span class="n">true</span>
<span class="mi">4</span>  <span class="n">PARQUET</span>              <span class="n">true</span>

                                            <span class="n">Location</span>
<span class="mi">0</span>  <span class="n">hdfs</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">20500</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">warehouse</span><span class="o">/</span><span class="n">tpcds</span><span class="o">.</span><span class="n">st</span><span class="o">...</span>
<span class="mi">1</span>  <span class="n">hdfs</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">20500</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">warehouse</span><span class="o">/</span><span class="n">tpcds</span><span class="o">.</span><span class="n">st</span><span class="o">...</span>
<span class="mi">2</span>  <span class="n">hdfs</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">20500</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">warehouse</span><span class="o">/</span><span class="n">tpcds</span><span class="o">.</span><span class="n">st</span><span class="o">...</span>
<span class="mi">3</span>  <span class="n">hdfs</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">20500</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">warehouse</span><span class="o">/</span><span class="n">tpcds</span><span class="o">.</span><span class="n">st</span><span class="o">...</span>
<span class="mi">4</span>  <span class="n">hdfs</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">20500</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">warehouse</span><span class="o">/</span><span class="n">tpcds</span><span class="o">.</span><span class="n">st</span><span class="o">...</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">cstats</span> <span class="o">=</span> <span class="n">ss</span><span class="o">.</span><span class="n">column_stats</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">cstats</span>
                   <span class="n">Column</span>          <span class="n">Type</span>  <span class="c1">#Distinct Values  #Nulls  Max Size  Avg Size</span>
<span class="mi">0</span>         <span class="n">ss_sold_time_sk</span>        <span class="n">BIGINT</span>             <span class="mi">13879</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">8</span>
<span class="mi">1</span>              <span class="n">ss_item_sk</span>        <span class="n">BIGINT</span>             <span class="mi">17925</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">8</span>
<span class="mi">2</span>          <span class="n">ss_customer_sk</span>        <span class="n">BIGINT</span>             <span class="mi">15207</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">8</span>
<span class="mi">3</span>             <span class="n">ss_cdemo_sk</span>        <span class="n">BIGINT</span>             <span class="mi">16968</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">8</span>
<span class="mi">4</span>             <span class="n">ss_hdemo_sk</span>        <span class="n">BIGINT</span>              <span class="mi">6220</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">8</span>
<span class="mi">5</span>              <span class="n">ss_addr_sk</span>        <span class="n">BIGINT</span>             <span class="mi">14077</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">8</span>
<span class="mi">6</span>             <span class="n">ss_store_sk</span>        <span class="n">BIGINT</span>                 <span class="mi">6</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">8</span>
<span class="mi">7</span>             <span class="n">ss_promo_sk</span>        <span class="n">BIGINT</span>               <span class="mi">298</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">8</span>
<span class="mi">8</span>        <span class="n">ss_ticket_number</span>           <span class="n">INT</span>             <span class="mi">15006</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">4</span>
<span class="mi">9</span>             <span class="n">ss_quantity</span>           <span class="n">INT</span>                <span class="mi">99</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">4</span>
<span class="mi">10</span>      <span class="n">ss_wholesale_cost</span>  <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>             <span class="mi">10196</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">4</span>
<span class="mi">11</span>          <span class="n">ss_list_price</span>  <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>             <span class="mi">19393</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">4</span>
<span class="mi">12</span>         <span class="n">ss_sales_price</span>  <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>             <span class="mi">15594</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">4</span>
<span class="mi">13</span>    <span class="n">ss_ext_discount_amt</span>  <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>             <span class="mi">29772</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">4</span>
<span class="mi">14</span>     <span class="n">ss_ext_sales_price</span>  <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>            <span class="mi">102758</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">4</span>
<span class="mi">15</span>  <span class="n">ss_ext_wholesale_cost</span>  <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>            <span class="mi">125448</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">4</span>
<span class="mi">16</span>      <span class="n">ss_ext_list_price</span>  <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>            <span class="mi">141419</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">4</span>
<span class="mi">17</span>             <span class="n">ss_ext_tax</span>  <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>             <span class="mi">33837</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">4</span>
<span class="mi">18</span>          <span class="n">ss_coupon_amt</span>  <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>             <span class="mi">29772</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">4</span>
<span class="mi">19</span>            <span class="n">ss_net_paid</span>  <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>            <span class="mi">109981</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">4</span>
<span class="mi">20</span>    <span class="n">ss_net_paid_inc_tax</span>  <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>            <span class="mi">132286</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">4</span>
<span class="mi">21</span>          <span class="n">ss_net_profit</span>  <span class="n">DECIMAL</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>            <span class="mi">122436</span>      <span class="o">-</span><span class="mi">1</span>       <span class="n">NaN</span>         <span class="mi">4</span>
<span class="mi">22</span>        <span class="n">ss_sold_date_sk</span>        <span class="n">BIGINT</span>               <span class="mi">120</span>       <span class="mi">0</span>       <span class="n">NaN</span>         <span class="mi">8</span>
</code></pre></div>
<h3 id="refresh-and-invalidate-metadata"><code>REFRESH</code> and <code>INVALIDATE METADATA</code></h3>
<p>These DDL commands are available as table-level and client-level
methods:</p>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-class">



<h3 id="ibis.backends.impala.Backend" class="doc doc-heading">
        <code>
Backend            (<a title="ibis.backends.base.sql.BaseSQLBackend" href="../../api/backends/sql/#ibis.backends.base.sql.BaseSQLBackend">BaseSQLBackend</a>)
        </code>



</h3>

    <div class="doc doc-contents first">





  <div class="doc doc-children">







<h4 id="ibis.backends.impala.Backend-methods">Methods</h4>

  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.invalidate_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">invalidate_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Issue an <code>INVALIDATE METADATA</code> command.</p>
<p>Optionally this applies to a specific table. See Impala documentation.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str | None</code></td>
        <td><p>Table name. Can be fully qualified (with database)</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>str | None</code></td>
        <td><p>Database name</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
    </div>

  </div>





  </div>

    </div>

  </div>

<!-- prettier-ignore-end -->

<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-class">



<h3 id="ibis.backends.impala.client.ImpalaTable" class="doc doc-heading">
        <code>
ImpalaTable            (<a title="ibis.expr.types.relations.TableExpr" href="../../api/expressions/tables/#ibis.expr.types.relations.TableExpr">TableExpr</a>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>A physical table in the Impala-Hive metastore</p>




  <div class="doc doc-children">













  </div>

    </div>

  </div>

<!-- prettier-ignore-end -->

<p>You can invalidate the cached metadata for a single table or for all
tables using <code>invalidate_metadata</code>, and similarly invoke
<code>REFRESH db_name.table_name</code> using the <code>refresh</code> method.</p>
<div class="highlight"><pre><span></span><code><span class="n">client</span><span class="o">.</span><span class="n">invalidate_metadata</span><span class="p">()</span>

<span class="n">table</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">table_name</span><span class="p">)</span>
<span class="n">table</span><span class="o">.</span><span class="n">invalidate_metadata</span><span class="p">()</span>

<span class="n">table</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</code></pre></div>
<p>These methods are often used in conjunction with the <code>LOAD DATA</code>
commands and <code>COMPUTE STATS</code>. See the Impala documentation for full
details.</p>
<h2 id="issuing-load-data-commands">Issuing <code>LOAD DATA</code> commands</h2>
<p>The <code>LOAD DATA</code> DDL physically moves a single data file or a directory
of files into the correct location for a table or table partition. It is
especially useful for partitioned tables as you do not have to construct
the directory path for a partition by hand, so simpler and less
error-prone than manually moving files with low level HDFS commands. It
also deals with file name conflicts so data is not lost in such cases.</p>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-class">



<h3 id="ibis.backends.impala.Backend" class="doc doc-heading">
        <code>
Backend            (<a title="ibis.backends.base.sql.BaseSQLBackend" href="../../api/backends/sql/#ibis.backends.base.sql.BaseSQLBackend">BaseSQLBackend</a>)
        </code>



</h3>

    <div class="doc doc-contents first">





  <div class="doc doc-children">







<h4 id="ibis.backends.impala.Backend-methods">Methods</h4>

  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.load_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">partition</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Loads data into an Impala table by physically moving data files.</p>

    </div>

  </div>





  </div>

    </div>

  </div>

<!-- prettier-ignore-end -->

<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-class">



<h3 id="ibis.backends.impala.client.ImpalaTable" class="doc doc-heading">
        <code>
ImpalaTable            (<a title="ibis.expr.types.relations.TableExpr" href="../../api/expressions/tables/#ibis.expr.types.relations.TableExpr">TableExpr</a>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>A physical table in the Impala-Hive metastore</p>




  <div class="doc doc-children">







<h4 id="ibis.backends.impala.client.ImpalaTable-methods">Methods</h4>

  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.client.ImpalaTable.load_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">partition</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Load data into an Impala table.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>path</code></td>
        <td><code>None</code></td>
        <td><p>Data to load</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>overwrite</code></td>
        <td><code>None</code></td>
        <td><p>Overwrite the existing data in the entire table or indicated
partition</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>partition</code></td>
        <td><code>None</code></td>
        <td><p>If specified, the partition must already exist</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
    </div>

  </div>





  </div>

    </div>

  </div>

<!-- prettier-ignore-end -->

<p>To use these methods, pass the path of a single file or a directory of
files you want to load. Afterward, you may want to update the table
statistics (see Impala documentation):</p>
<div class="highlight"><pre><span></span><code><span class="n">table</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="n">table</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</code></pre></div>
<p>Like the other methods with support for partitioned tables, you can load
into a particular partition with the <code>partition</code> keyword argument:</p>
<div class="highlight"><pre><span></span><code><span class="n">part</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">table</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">partition</span><span class="o">=</span><span class="n">part</span><span class="p">)</span>
</code></pre></div>
<h2 id="parquet-and-other-session-options">Parquet and other session options</h2>
<p>Ibis gives you access to Impala session-level variables that affect
query execution:</p>
<!-- prettier-ignore-start -->


  <div class="doc doc-object doc-class">



<h3 id="ibis.backends.impala.Backend" class="doc doc-heading">
        <code>
Backend            (<a title="ibis.backends.base.sql.BaseSQLBackend" href="../../api/backends/sql/#ibis.backends.base.sql.BaseSQLBackend">BaseSQLBackend</a>)
        </code>



</h3>

    <div class="doc doc-contents first">





  <div class="doc doc-children">







<h4 id="ibis.backends.impala.Backend-methods">Methods</h4>

  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.disable_codegen" class="doc doc-heading">
<code class="highlight language-python"><span class="n">disable_codegen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Turn off or on LLVM codegen in Impala query execution.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>disabled</code></td>
        <td><code>None</code></td>
        <td><p>To disable codegen, pass with no argument or True. To enable
codegen, pass False.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="ibis.backends.impala.Backend.get_options" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Return current query options for the Impala session.</p>

    </div>

  </div>







  </div>

    </div>

  </div>

<!-- prettier-ignore-end -->

<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">client</span><span class="o">.</span><span class="n">get_options</span><span class="p">()</span>
<span class="p">{</span><span class="s1">&#39;ABORT_ON_ERROR&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;APPX_COUNT_DISTINCT&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;BUFFER_POOL_LIMIT&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;COMPRESSION_CODEC&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;COMPUTE_STATS_MIN_SAMPLE_SIZE&#39;</span><span class="p">:</span> <span class="s1">&#39;1073741824&#39;</span><span class="p">,</span>
 <span class="s1">&#39;DEFAULT_JOIN_DISTRIBUTION_MODE&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;DEFAULT_SPILLABLE_BUFFER_SIZE&#39;</span><span class="p">:</span> <span class="s1">&#39;2097152&#39;</span><span class="p">,</span>
 <span class="s1">&#39;DISABLE_CODEGEN&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;DISABLE_CODEGEN_ROWS_THRESHOLD&#39;</span><span class="p">:</span> <span class="s1">&#39;50000&#39;</span><span class="p">,</span>
 <span class="s1">&#39;DISABLE_ROW_RUNTIME_FILTERING&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;DISABLE_STREAMING_PREAGGREGATIONS&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;DISABLE_UNSAFE_SPILLS&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;ENABLE_EXPR_REWRITES&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
 <span class="s1">&#39;EXEC_SINGLE_NODE_ROWS_THRESHOLD&#39;</span><span class="p">:</span> <span class="s1">&#39;100&#39;</span><span class="p">,</span>
 <span class="s1">&#39;EXEC_TIME_LIMIT_S&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;EXPLAIN_LEVEL&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
 <span class="s1">&#39;HBASE_CACHE_BLOCKS&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;HBASE_CACHING&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;IDLE_SESSION_TIMEOUT&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;MAX_ERRORS&#39;</span><span class="p">:</span> <span class="s1">&#39;100&#39;</span><span class="p">,</span>
 <span class="s1">&#39;MAX_NUM_RUNTIME_FILTERS&#39;</span><span class="p">:</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span>
 <span class="s1">&#39;MAX_ROW_SIZE&#39;</span><span class="p">:</span> <span class="s1">&#39;524288&#39;</span><span class="p">,</span>
 <span class="s1">&#39;MEM_LIMIT&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;MIN_SPILLABLE_BUFFER_SIZE&#39;</span><span class="p">:</span> <span class="s1">&#39;65536&#39;</span><span class="p">,</span>
 <span class="s1">&#39;MT_DOP&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;NUM_SCANNER_THREADS&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;OPTIMIZE_PARTITION_KEY_SCANS&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;PARQUET_ANNOTATE_STRINGS_UTF8&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;PARQUET_ARRAY_RESOLUTION&#39;</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span>
 <span class="s1">&#39;PARQUET_DICTIONARY_FILTERING&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
 <span class="s1">&#39;PARQUET_FALLBACK_SCHEMA_RESOLUTION&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;PARQUET_FILE_SIZE&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;PARQUET_READ_STATISTICS&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
 <span class="s1">&#39;PREFETCH_MODE&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
 <span class="s1">&#39;QUERY_TIMEOUT_S&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REPLICA_PREFERENCE&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REQUEST_POOL&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;RUNTIME_BLOOM_FILTER_SIZE&#39;</span><span class="p">:</span> <span class="s1">&#39;1048576&#39;</span><span class="p">,</span>
 <span class="s1">&#39;RUNTIME_FILTER_MAX_SIZE&#39;</span><span class="p">:</span> <span class="s1">&#39;16777216&#39;</span><span class="p">,</span>
 <span class="s1">&#39;RUNTIME_FILTER_MIN_SIZE&#39;</span><span class="p">:</span> <span class="s1">&#39;1048576&#39;</span><span class="p">,</span>
 <span class="s1">&#39;RUNTIME_FILTER_MODE&#39;</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span>
 <span class="s1">&#39;RUNTIME_FILTER_WAIT_TIME_MS&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;S3_SKIP_INSERT_STAGING&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
 <span class="s1">&#39;SCHEDULE_RANDOM_REPLICA&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;SCRATCH_LIMIT&#39;</span><span class="p">:</span> <span class="s1">&#39;-1&#39;</span><span class="p">,</span>
 <span class="s1">&#39;SEQ_COMPRESSION_MODE&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;SYNC_DDL&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">}</span>
</code></pre></div>
<p>To enable Snappy compression for Parquet files, you could do either of:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">client</span><span class="o">.</span><span class="n">set_options</span><span class="p">({</span><span class="s1">&#39;COMPRESSION_CODEC&#39;</span><span class="p">:</span> <span class="s1">&#39;snappy&#39;</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">client</span><span class="o">.</span><span class="n">set_compression_codec</span><span class="p">(</span><span class="s1">&#39;snappy&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">client</span><span class="o">.</span><span class="n">get_options</span><span class="p">()[</span><span class="s1">&#39;COMPRESSION_CODEC&#39;</span><span class="p">]</span>
<span class="s1">&#39;SNAPPY&#39;</span>
</code></pre></div>
<h2 id="ingesting-data-from-pandas">Ingesting data from pandas</h2>
<p>Overall interoperability between the Hadoop / Spark ecosystems and
pandas / the PyData stack is poor, but it will improve in time (this is
a major part of the Ibis roadmap).</p>
<p>Ibis's Impala tools currently interoperate with pandas in these ways:</p>
<ul>
<li>Ibis expressions return pandas objects (i.e. DataFrame or Series)
  for non-scalar expressions when calling their <code>execute</code> method</li>
<li>The <code>create_table</code> and <code>insert</code> methods can accept pandas objects.
  This includes inserting into partitioned tables. It currently uses
  CSV as the ingest route.</li>
</ul>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;pandas_table&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">pandas_table</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
  <span class="n">bar</span>  <span class="n">foo</span>
<span class="mi">0</span>   <span class="n">a</span>    <span class="mi">1</span>
<span class="mi">1</span>   <span class="n">b</span>    <span class="mi">2</span>
<span class="mi">2</span>   <span class="n">c</span>    <span class="mi">3</span>
<span class="mi">3</span>   <span class="n">d</span>    <span class="mi">4</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">drop</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;empty_for_insert&#39;</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">schema</span><span class="p">())</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">to_insert</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">empty_for_insert</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">to_insert</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">to_insert</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
  <span class="n">bar</span>  <span class="n">foo</span>
<span class="mi">0</span>   <span class="n">a</span>    <span class="mi">1</span>
<span class="mi">1</span>   <span class="n">b</span>    <span class="mi">2</span>
<span class="mi">2</span>   <span class="n">c</span>    <span class="mi">3</span>
<span class="mi">3</span>   <span class="n">d</span>    <span class="mi">4</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">to_insert</span><span class="o">.</span><span class="n">drop</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;pandas_table&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">pandas_table</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
   <span class="n">foo</span> <span class="n">bar</span>
<span class="mi">0</span>    <span class="mi">1</span>   <span class="n">a</span>
<span class="mi">1</span>    <span class="mi">2</span>   <span class="n">b</span>
<span class="mi">2</span>    <span class="mi">3</span>   <span class="n">c</span>
<span class="mi">3</span>    <span class="mi">4</span>   <span class="n">d</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">drop</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;empty_for_insert&#39;</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">schema</span><span class="p">())</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">to_insert</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">empty_for_insert</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">to_insert</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">to_insert</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
   <span class="n">foo</span> <span class="n">bar</span>
<span class="mi">0</span>    <span class="mi">1</span>   <span class="n">a</span>
<span class="mi">1</span>    <span class="mi">2</span>   <span class="n">b</span>
<span class="mi">2</span>    <span class="mi">3</span>   <span class="n">c</span>
<span class="mi">3</span>    <span class="mi">4</span>   <span class="n">d</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">to_insert</span><span class="o">.</span><span class="n">drop</span><span class="p">()</span>
</code></pre></div>
<h2 id="uploading-downloading-data-from-hdfs">Uploading / downloading data from HDFS</h2>
<p>If you've set up an HDFS connection, you can use the Ibis HDFS interface
to look through your data and read and write files to and from HDFS:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">hdfs</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">hdfs</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">hdfs</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="s1">&#39;/__ibis/ibis-testing-data&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;README.md&#39;</span><span class="p">,</span>
 <span class="s1">&#39;avro&#39;</span><span class="p">,</span>
 <span class="s1">&#39;awards_players.csv&#39;</span><span class="p">,</span>
 <span class="s1">&#39;batting.csv&#39;</span><span class="p">,</span>
 <span class="s1">&#39;csv&#39;</span><span class="p">,</span>
 <span class="s1">&#39;diamonds.csv&#39;</span><span class="p">,</span>
 <span class="s1">&#39;functional_alltypes.csv&#39;</span><span class="p">,</span>
 <span class="s1">&#39;functional_alltypes.parquet&#39;</span><span class="p">,</span>
 <span class="s1">&#39;geo.csv&#39;</span><span class="p">,</span>
 <span class="s1">&#39;ibis_testing.db&#39;</span><span class="p">,</span>
 <span class="s1">&#39;parquet&#39;</span><span class="p">,</span>
 <span class="s1">&#39;struct_table.avro&#39;</span><span class="p">,</span>
 <span class="s1">&#39;udf&#39;</span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">hdfs</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="s1">&#39;/__ibis/ibis-testing-data/parquet&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;functional_alltypes&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpch_customer&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpch_lineitem&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpch_nation&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpch_orders&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpch_part&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpch_partsupp&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpch_region&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpch_supplier&#39;</span><span class="p">]</span>
</code></pre></div>
<p>Suppose we wanted to download
<code>/__ibis/ibis-testing-data/parquet/functional_alltypes</code>, which is a
directory. We need only do:</p>
<div class="highlight"><pre><span></span><code>$ rm -rf parquet_dir/
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">hdfs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/__ibis/ibis-testing-data/parquet/functional_alltypes&#39;</span><span class="p">,</span>
<span class="o">...</span>          <span class="s1">&#39;parquet_dir&#39;</span><span class="p">,</span>
<span class="o">...</span>           <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="s1">&#39;/ibis/docs/source/tutorial/parquet_dir&#39;</span>
</code></pre></div>
<p>Now we have that directory locally:</p>
<div class="highlight"><pre><span></span><code>$ ls parquet_dir/
9a41de519352ab07-4e76bc4d9fb5a789_1624886651_data.0.parq
9a41de519352ab07-4e76bc4d9fb5a78a_778826485_data.0.parq
9a41de519352ab07-4e76bc4d9fb5a78b_1277612014_data.0.parq
</code></pre></div>
<p>Files and directories can be written to HDFS just as easily using <code>put</code>:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;/__ibis/dir-write-example&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">hdfs</span><span class="o">.</span><span class="n">rm</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">hdfs</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;parquet_dir&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">hdfs</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="s1">&#39;/__ibis/dir-write-example&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;9a41de519352ab07-4e76bc4d9fb5a789_1624886651_data.0.parq&#39;</span><span class="p">,</span>
 <span class="s1">&#39;9a41de519352ab07-4e76bc4d9fb5a78a_778826485_data.0.parq&#39;</span><span class="p">,</span>
 <span class="s1">&#39;9a41de519352ab07-4e76bc4d9fb5a78b_1277612014_data.0.parq&#39;</span><span class="p">]</span>
</code></pre></div>
<p>Delete files and directories with <code>rm</code>:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">hdfs</span><span class="o">.</span><span class="n">rm</span><span class="p">(</span><span class="s1">&#39;/__ibis/dir-write-example&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>rm -rf parquet_dir/
</code></pre></div>
<h2 id="queries-on-parquet-avro-and-delimited-files-in-hdfs">Queries on Parquet, Avro, and Delimited files in HDFS</h2>
<p>Ibis can easily create temporary or persistent Impala tables that
reference data in the following formats:</p>
<ul>
<li>Parquet (<code>parquet_file</code>)</li>
<li>Avro (<code>avro_file</code>)</li>
<li>Delimited text formats (CSV, TSV, etc.) (<code>delimited_file</code>)</li>
</ul>
<p>Parquet is the easiest because the schema can be read from the data
files:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;/__ibis/ibis-testing-data/parquet/tpch_lineitem&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">lineitem</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">parquet_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">lineitem</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
   <span class="n">l_orderkey</span>  <span class="n">l_partkey</span>  <span class="n">l_suppkey</span>  <span class="n">l_linenumber</span> <span class="n">l_quantity</span> <span class="n">l_extendedprice</span>  \
<span class="mi">0</span>           <span class="mi">1</span>     <span class="mi">155190</span>       <span class="mi">7706</span>             <span class="mi">1</span>      <span class="mf">17.00</span>        <span class="mf">21168.23</span>
<span class="mi">1</span>           <span class="mi">1</span>      <span class="mi">67310</span>       <span class="mi">7311</span>             <span class="mi">2</span>      <span class="mf">36.00</span>        <span class="mf">45983.16</span>

  <span class="n">l_discount</span> <span class="n">l_tax</span> <span class="n">l_returnflag</span> <span class="n">l_linestatus</span>  <span class="n">l_shipdate</span> <span class="n">l_commitdate</span>  \
<span class="mi">0</span>       <span class="mf">0.04</span>  <span class="mf">0.02</span>            <span class="n">N</span>            <span class="n">O</span>  <span class="mi">1996</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">13</span>   <span class="mi">1996</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">12</span>
<span class="mi">1</span>       <span class="mf">0.09</span>  <span class="mf">0.06</span>            <span class="n">N</span>            <span class="n">O</span>  <span class="mi">1996</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">12</span>   <span class="mi">1996</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">28</span>

  <span class="n">l_receiptdate</span>     <span class="n">l_shipinstruct</span> <span class="n">l_shipmode</span>  \
<span class="mi">0</span>    <span class="mi">1996</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">22</span>  <span class="n">DELIVER</span> <span class="n">IN</span> <span class="n">PERSON</span>      <span class="n">TRUCK</span>
<span class="mi">1</span>    <span class="mi">1996</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">20</span>   <span class="n">TAKE</span> <span class="n">BACK</span> <span class="n">RETURN</span>       <span class="n">MAIL</span>

                            <span class="n">l_comment</span>
<span class="mi">0</span>             <span class="n">egular</span> <span class="n">courts</span> <span class="n">above</span> <span class="n">the</span>
<span class="mi">1</span>  <span class="n">ly</span> <span class="n">final</span> <span class="n">dependencies</span><span class="p">:</span> <span class="n">slyly</span> <span class="n">bold</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">lineitem</span><span class="o">.</span><span class="n">l_extendedprice</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;229577310901.20&#39;</span><span class="p">)</span>
</code></pre></div>
<p>If you want to query a Parquet file and also create a table in Impala
that remains after your session, you can pass more information to
<code>parquet_file</code>:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">table</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">parquet_file</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;my_parquet_table&#39;</span><span class="p">,</span>
<span class="o">...</span>                          <span class="n">database</span><span class="o">=</span><span class="s1">&#39;ibis_testing&#39;</span><span class="p">,</span>
<span class="o">...</span>                          <span class="n">persist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">table</span><span class="o">.</span><span class="n">l_extendedprice</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;229577310901.20&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;my_parquet_table&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">l_extendedprice</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;229577310901.20&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">drop_table</span><span class="p">(</span><span class="s1">&#39;my_parquet_table&#39;</span><span class="p">)</span>
</code></pre></div>
<p>To query delimited files, you need to write down an Ibis schema. At some
point we'd like to build some helper tools that will infer the schema
for you, all in good time.</p>
<p>There's some CSV files in the test folder, so let's use those:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">hdfs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/__ibis/ibis-testing-data/csv&#39;</span><span class="p">,</span> <span class="s1">&#39;csv-files&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="s1">&#39;/ibis/docs/source/tutorial/csv-files&#39;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>$ cat csv-files/0.csv
63IEbRheTh,0.679388707915,6
mG4hlqnjeG,2.80710565922,15
JTPdX9SZH5,-0.155126406372,55
2jcl6FypOl,1.03787834032,21
k3TbJLaadQ,-1.40190801103,23
rP5J4xvinM,-0.442092712869,22
WniUylixYt,-0.863748033806,27
znsDuKOB1n,-0.566029637098,47
4SRP9jlo1M,0.331460412318,88
KsfjPyDf5e,-0.578930506363,70
</code></pre></div>
<div class="highlight"><pre><span></span><code>$ rm -rf csv-files/
</code></pre></div>
<p>The schema here is pretty simple (see <code>ibis.schema</code> for more):</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">schema</span> <span class="o">=</span> <span class="n">ibis</span><span class="o">.</span><span class="n">schema</span><span class="p">([(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
<span class="o">...</span>                       <span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;double&#39;</span><span class="p">),</span>
<span class="o">...</span>                       <span class="p">(</span><span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;int32&#39;</span><span class="p">)])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">table</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">delimited_file</span><span class="p">(</span><span class="s1">&#39;/__ibis/ibis-testing-data/csv&#39;</span><span class="p">,</span>
<span class="o">...</span>                            <span class="n">schema</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">table</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
          <span class="n">foo</span>       <span class="n">bar</span>  <span class="n">baz</span>
<span class="mi">0</span>  <span class="mi">63</span><span class="n">IEbRheTh</span>  <span class="mf">0.679389</span>    <span class="mi">6</span>
<span class="mi">1</span>  <span class="n">mG4hlqnjeG</span>  <span class="mf">2.807106</span>   <span class="mi">15</span>
<span class="mi">2</span>  <span class="n">JTPdX9SZH5</span> <span class="o">-</span><span class="mf">0.155126</span>   <span class="mi">55</span>
<span class="mi">3</span>  <span class="mi">2</span><span class="n">jcl6FypOl</span>  <span class="mf">1.037878</span>   <span class="mi">21</span>
<span class="mi">4</span>  <span class="n">k3TbJLaadQ</span> <span class="o">-</span><span class="mf">1.401908</span>   <span class="mi">23</span>
<span class="mi">5</span>  <span class="n">rP5J4xvinM</span> <span class="o">-</span><span class="mf">0.442093</span>   <span class="mi">22</span>
<span class="mi">6</span>  <span class="n">WniUylixYt</span> <span class="o">-</span><span class="mf">0.863748</span>   <span class="mi">27</span>
<span class="mi">7</span>  <span class="n">znsDuKOB1n</span> <span class="o">-</span><span class="mf">0.566030</span>   <span class="mi">47</span>
<span class="mi">8</span>  <span class="mi">4</span><span class="n">SRP9jlo1M</span>  <span class="mf">0.331460</span>   <span class="mi">88</span>
<span class="mi">9</span>  <span class="n">KsfjPyDf5e</span> <span class="o">-</span><span class="mf">0.578931</span>   <span class="mi">70</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">table</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
   <span class="n">count</span>  <span class="n">nulls</span>       <span class="nb">min</span>       <span class="nb">max</span>       <span class="nb">sum</span>    <span class="n">mean</span>  <span class="n">approx_nunique</span>
<span class="mi">0</span>    <span class="mi">100</span>      <span class="mi">0</span> <span class="o">-</span><span class="mf">1.401908</span>  <span class="mf">2.807106</span>  <span class="mf">8.479978</span>  <span class="mf">0.0848</span>              <span class="mi">10</span>
</code></pre></div>
<p>For functions like <code>parquet_file</code> and <code>delimited_file</code>, an HDFS
directory must be passed (we'll add support for S3 and other filesystems
later) and the directory must contain files all having the same schema.</p>
<p>If you have Avro data, you can query it too if you have the full avro
schema:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">avro_schema</span> <span class="o">=</span> <span class="p">{</span>
<span class="o">...</span>     <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="o">...</span>         <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;int&quot;</span><span class="p">,</span> <span class="s2">&quot;null&quot;</span><span class="p">],</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;R_REGIONKEY&quot;</span><span class="p">},</span>
<span class="o">...</span>         <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;null&quot;</span><span class="p">],</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;R_NAME&quot;</span><span class="p">},</span>
<span class="o">...</span>         <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;null&quot;</span><span class="p">],</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;R_COMMENT&quot;</span><span class="p">}],</span>
<span class="o">...</span>     <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;record&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span>
<span class="o">...</span> <span class="p">}</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;/__ibis/ibis-testing-data/avro/tpch.region&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">hdfs</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">create_parents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">table</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">avro_file</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">avro_schema</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">table</span>
<span class="n">Empty</span> <span class="n">DataFrame</span>
<span class="n">Columns</span><span class="p">:</span> <span class="p">[</span><span class="n">r_regionkey</span><span class="p">,</span> <span class="n">r_name</span><span class="p">,</span> <span class="n">r_comment</span><span class="p">]</span>
<span class="n">Index</span><span class="p">:</span> <span class="p">[]</span>
</code></pre></div>
<h2 id="other-helper-functions-for-interacting-with-the-database">Other helper functions for interacting with the database</h2>
<p>We're adding a growing list of useful utility functions for interacting
with an Impala cluster on the client object. The idea is that you should
be able to do any database-admin-type work with Ibis and not have to
switch over to the Impala SQL shell. Any ways we can make this more
pleasant, please let us know.</p>
<p>Here's some of the features, which we'll give examples for:</p>
<ul>
<li>Listing and searching for available databases and tables</li>
<li>Creating and dropping databases</li>
<li>Getting table schemas</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">list_databases</span><span class="p">(</span><span class="n">like</span><span class="o">=</span><span class="s1">&#39;ibis*&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;ibis_testing&#39;</span><span class="p">,</span> <span class="s1">&#39;ibis_testing_tmp_db&#39;</span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">list_tables</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="s1">&#39;ibis_testing&#39;</span><span class="p">,</span> <span class="n">like</span><span class="o">=</span><span class="s1">&#39;tpch*&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;tpch_customer&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpch_lineitem&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpch_nation&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpch_orders&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpch_part&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpch_partsupp&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpch_region&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpch_region_avro&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tpch_supplier&#39;</span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">schema</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">get_schema</span><span class="p">(</span><span class="s1">&#39;functional_alltypes&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">schema</span>
<span class="n">ibis</span><span class="o">.</span><span class="n">Schema</span> <span class="p">{</span>
  <span class="nb">id</span>               <span class="n">int32</span>
  <span class="n">bool_col</span>         <span class="n">boolean</span>
  <span class="n">tinyint_col</span>      <span class="n">int8</span>
  <span class="n">smallint_col</span>     <span class="n">int16</span>
  <span class="n">int_col</span>          <span class="n">int32</span>
  <span class="n">bigint_col</span>       <span class="n">int64</span>
  <span class="n">float_col</span>        <span class="n">float32</span>
  <span class="n">double_col</span>       <span class="n">float64</span>
  <span class="n">date_string_col</span>  <span class="n">string</span>
  <span class="n">string_col</span>       <span class="n">string</span>
  <span class="n">timestamp_col</span>    <span class="n">timestamp</span>
  <span class="n">year</span>             <span class="n">int32</span>
  <span class="n">month</span>            <span class="n">int32</span>
<span class="p">}</span>
</code></pre></div>
<p>Databases can be created, too, and you can set the storage path in HDFS
you want for the data files</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">db</span> <span class="o">=</span> <span class="s1">&#39;ibis_testing2&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">create_database</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;/__ibis/my-test-database&#39;</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="c1"># you may or may not have to give the impala user write and execute permissions to &#39;/__ibis/my-test-database&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">hdfs</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="s1">&#39;/__ibis/my-test-database&#39;</span><span class="p">,</span> <span class="mo">0o777</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;example_table&#39;</span><span class="p">,</span> <span class="n">con</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;functional_alltypes&#39;</span><span class="p">),</span>
<span class="o">...</span>                  <span class="n">database</span><span class="o">=</span><span class="n">db</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<p>Hopefully, there will be data files in the indicated spot in HDFS:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">hdfs</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="s1">&#39;/__ibis/my-test-database&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;example_table&#39;</span><span class="p">]</span>
</code></pre></div>
<p>To drop a database, including all tables in it, you can use
<code>drop_database</code> with <code>force=True</code>:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">drop_database</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<h2 id="faster-queries-on-small-data-in-impala">Faster queries on small data in Impala</h2>
<p>Since Impala internally uses LLVM to compile parts of queries (aka
"codegen") to make them faster on large data sets there is a certain
amount of overhead with running many kinds of queries, even on small
datasets. You can disable LLVM code generation when using Ibis, which
may significantly speed up queries on smaller datasets:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">rand</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">disable_codegen</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;ibis_testing.functional_alltypes&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>$ <span class="nb">time</span> python -c <span class="s2">&quot;(t.double_col + rand()).sum().execute()&quot;</span>
<span class="m">27</span>.7 ms ± <span class="m">996</span> µs per loop <span class="o">(</span>mean ± std. dev. of <span class="m">7</span> runs, <span class="m">10</span> loops each<span class="o">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Turn codegen back on</span>
<span class="n">con</span><span class="o">.</span><span class="n">disable_codegen</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>$ <span class="nb">time</span> python -c <span class="s2">&quot;(t.double_col + rand()).sum().execute()&quot;</span>
<span class="m">27</span> ms ± <span class="m">1</span>.62 ms per loop <span class="o">(</span>mean ± std. dev. of <span class="m">7</span> runs, <span class="m">10</span> loops each<span class="o">)</span>
</code></pre></div>
<p>It's important to remember that codegen is a fixed overhead and will
significantly speed up queries on big data</p>
<h2 id="user-defined-functions-udf">User Defined functions (UDF)</h2>
<p>Impala currently supports user-defined scalar functions (known
henceforth as <em>UDFs</em>) and aggregate functions (respectively <em>UDAs</em>) via
a C++ extension API.</p>
<p>Initial support for using C++ UDFs in Ibis came in version 0.4.0.</p>
<h3 id="using-scalar-functions-udfs">Using scalar functions (UDFs)</h3>
<p>Let's take an example to illustrate how to make a C++ UDF available to
Ibis. Here is a function that computes an approximate equality between
floating point values:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;impala_udf/udf.h&quot;</span><span class="cp"></span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cctype&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cmath&gt;</span><span class="cp"></span>

<span class="n">BooleanVal</span><span class="w"> </span><span class="nf">FuzzyEquals</span><span class="p">(</span><span class="n">FunctionContext</span><span class="o">*</span><span class="w"> </span><span class="n">ctx</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">DoubleVal</span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">DoubleVal</span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">EPSILON</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.000001f</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">is_null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">y</span><span class="p">.</span><span class="n">is_null</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">BooleanVal</span><span class="o">::</span><span class="n">null</span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">delta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fabs</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">val</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">y</span><span class="p">.</span><span class="n">val</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">BooleanVal</span><span class="p">(</span><span class="n">delta</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">EPSILON</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>You can compile this to either a shared library (a <code>.so</code> file) or to
LLVM bitcode with clang (a <code>.ll</code> file). Skipping that step for now (will
add some more detailed instructions here later, promise).</p>
<p>To make this function callable, we use <code>ibis.impala.wrap_udf</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">library</span> <span class="o">=</span> <span class="s1">&#39;/ibis/udfs/udftest.ll&#39;</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;double&#39;</span><span class="p">,</span> <span class="s1">&#39;double&#39;</span><span class="p">]</span>
<span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;boolean&#39;</span>
<span class="n">symbol</span> <span class="o">=</span> <span class="s1">&#39;FuzzyEquals&#39;</span>
<span class="n">udf_db</span> <span class="o">=</span> <span class="s1">&#39;ibis_testing&#39;</span>
<span class="n">udf_name</span> <span class="o">=</span> <span class="s1">&#39;fuzzy_equals&#39;</span>

<span class="n">fuzzy_equals</span> <span class="o">=</span> <span class="n">ibis</span><span class="o">.</span><span class="n">impala</span><span class="o">.</span><span class="n">wrap_udf</span><span class="p">(</span>
    <span class="n">library</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">udf_name</span>
<span class="p">)</span>
</code></pre></div>
<p>In typical workflows, you will set up a UDF in Impala once then use it
thenceforth. So the <em>first time</em> you do this, you need to create the UDF
in Impala:</p>
<div class="highlight"><pre><span></span><code><span class="n">client</span><span class="o">.</span><span class="n">create_function</span><span class="p">(</span><span class="n">fuzzy_equals</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="n">udf_db</span><span class="p">)</span>
</code></pre></div>
<p>Now, we must register this function as a new Impala operation in Ibis.
This must take place each time you load your Ibis session.</p>
<div class="highlight"><pre><span></span><code><span class="n">func</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">fuzzy_equals</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">udf_db</span><span class="p">)</span>
</code></pre></div>
<p>The object <code>fuzzy_equals</code> is callable and works with Ibis expressions:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">db</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">database</span><span class="p">(</span><span class="s1">&#39;ibis_testing&#39;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">functional_alltypes</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">expr</span> <span class="o">=</span> <span class="n">fuzzy_equals</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">float_col</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">double_col</span> <span class="o">/</span> <span class="mi">10</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">expr</span><span class="o">.</span><span class="n">execute</span><span class="p">()[:</span><span class="mi">10</span><span class="p">]</span>
<span class="mi">0</span>     <span class="kc">True</span>
<span class="mi">1</span>    <span class="kc">False</span>
<span class="mi">2</span>    <span class="kc">False</span>
<span class="mi">3</span>    <span class="kc">False</span>
<span class="mi">4</span>    <span class="kc">False</span>
<span class="mi">5</span>    <span class="kc">False</span>
<span class="mi">6</span>    <span class="kc">False</span>
<span class="mi">7</span>    <span class="kc">False</span>
<span class="mi">8</span>    <span class="kc">False</span>
<span class="mi">9</span>    <span class="kc">False</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">tmp</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">bool</span>
</code></pre></div>
<p>Note that the call to <code>register</code> on the UDF object must happen each time
you use Ibis. If you have a lot of UDFs, I suggest you create a file
with all of your wrapper declarations and user APIs that you load with
your Ibis session to plug in all your own functions.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../datafusion/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Datafusion" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Datafusion
            </div>
          </div>
        </a>
      
      
        
        <a href="../mysql/" class="md-footer__link md-footer__link--next" aria-label="Next: MySQL" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              MySQL
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2014-2022, Ibis developers
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://twitter.com/IbisData" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://github.com/ibis-project/ibis" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "header.autohide", "navigation.indexes", "navigation.instant", "search.highlight", "search.share", "search.suggest"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.092fa1f6.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a9542cf.min.js"></script>
      
    
  </body>
</html>