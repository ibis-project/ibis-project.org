<!DOCTYPE html>
<html>
    <head>
        
        <title>Ibis: Python data analysis productivity framework</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel='shortcut icon' type='image/x-icon' href='/static/img/favicon.ico'/>
        <link rel="stylesheet"
              href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
              integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
              crossorigin="anonymous">
        
            <link rel="stylesheet"
                  href="/static/css/ibis.css">
        
            <link rel="stylesheet"
                  href="/static/css/codehilite.css">
        
        <script src="https://kit.fontawesome.com/79e5369384.js" crossorigin="anonymous"></script>
    </head>
    <body>
        <header>
            <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
                <div class="container">
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#nav-content" aria-controls="nav-content" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    
                        <a class="navbar-brand" href="/">
                            
                                <img alt="" src="/static/img/logo_ibis.svg" class="header-logo"/>
                            
                            
                                <span class="header-title">Ibis</span>
                            
                        </a>
                    

                    
                        <div class="collapse navbar-collapse" id="nav-content">   
                            <ul class="navbar-nav ml-auto">
                                
                                    
                                        <li class="nav-item dropdown">
                                            <a class="nav-link dropdown-toggle"
                                               data-toggle="dropdown"
                                               id="About us"
                                               href="#"
                                               role="button"
                                               aria-haspopup="true"
                                               aria-expanded="false">About us</a>
                                            <div class="dropdown-menu" aria-labelledby="About us">
                                            
                                                <a class="dropdown-item" href="/about/index.html">About Ibis</a>
                                            
                                                <a class="dropdown-item" href="/about/team.html">Team</a>
                                            
                                                <a class="dropdown-item" href="/about/roadmap.html">Roadmap</a>
                                            
                                                <a class="dropdown-item" href="/about/license.html">License</a>
                                            
                                            </div>
                                        </li>
                                    
                                
                                    
                                        <li class="nav-item">
                                            <a class="nav-link" href="/getting_started.html">Getting started</a>
                                        </li>
                                    
                                
                                    
                                        <li class="nav-item">
                                            <a class="nav-link" href="/docs/">Documentation</a>
                                        </li>
                                    
                                
                                    
                                        <li class="nav-item dropdown">
                                            <a class="nav-link dropdown-toggle"
                                               data-toggle="dropdown"
                                               id="Community"
                                               href="#"
                                               role="button"
                                               aria-haspopup="true"
                                               aria-expanded="false">Community</a>
                                            <div class="dropdown-menu" aria-labelledby="Community">
                                            
                                                <a class="dropdown-item" href="https://stackoverflow.com/questions/tagged/ibis">Ask a question (StackOverflow)</a>
                                            
                                                <a class="dropdown-item" href="https://gitter.im/ibis-dev/Lobby">Chat (Gitter)</a>
                                            
                                                <a class="dropdown-item" href="/community/coc.html">Code of conduct</a>
                                            
                                                <a class="dropdown-item" href="/community/ecosystem.html">Ecosystem</a>
                                            
                                            </div>
                                        </li>
                                    
                                
                                    
                                        <li class="nav-item">
                                            <a class="nav-link" href="/contribute.html">Contribute</a>
                                        </li>
                                    
                                
                            </ul>
                        </div>
                    
                </div>
            </nav>
        </header>
        <main role="main">
            <div class="container">
                
                               <h1 id="contributing-to-ibis">Contributing to Ibis</h1>
<h2 id="set-up-a-development-environment">Set up a development environment</h2>
<ol>
<li>
<p>Create a fork of the <a href="https://github.com/ibis-project/ibis">Ibis repository</a>, and clone it.</p>
<div class="codehilite"><pre><span></span><code>git clone https://github.com/&lt;your-github-username&gt;/ibis
</code></pre></div>

</li>
<li>
<p><a href="https://docs.conda.io/en/latest/miniconda.html">Download</a> and install Miniconda</p>
</li>
<li>
<p>Create a Conda environment suitable for ibis development:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">cd</span> ibis
conda create -n ibis-dev -f conda-lock/&lt;platform-64-pyver&gt;.lock
</code></pre></div>

</li>
<li>
<p>Activate the environment</p>
<div class="codehilite"><pre><span></span><code>conda activate ibis-dev
</code></pre></div>

</li>
<li>
<p>Install your local copy of Ibis into the Conda environment. In the root of the project run:</p>
<div class="codehilite"><pre><span></span><code>pip install -e .
</code></pre></div>

</li>
</ol>
<h2 id="find-an-issue-to-work-on">Find an issue to work on</h2>
<p>If you are working with Ibis, and find a bug, or you are reading the documentation and see something
wrong, or that could be clearer, you can work on that.</p>
<p>But sometimes, you may want to contribute to Ibis, but you don't have anything in mind. In that case,
you can check the GitHub issue tracker for Ibis, and look for issues with the label
<a href="https://github.com/ibis-project/ibis/issues?q=is%3Aopen+is%3Aissue+label%3A%22good+first+issue%22">good first issue</a>.
Feel free to also help with other issues that don't have the label, but they may be more challenging,
and require knowledge of Ibis internals.</p>
<p>Once you found an issue you want to work on, write a comment with the text <code>/take</code>, and GitHub will
assign the issue to yourself. This way, nobody else will work on it at the same time. If you find an
issue that someone else is assigned to, please contact the assignee to know if they are still working
on it.</p>
<h2 id="working-with-backends">Working with backends</h2>
<p>Ibis comes with several backends. If you want to work with a specific backend, you will have to install
the dependencies for the backend with <code>conda install -n ibis-dev -c conda-forge --file="ci/deps/&lt;backend&gt;.yml"</code>.</p>
<p>If you don't have a database for the backend you want to work on, you can check the configuration of the
continuos integration, where docker images are used for different backend. This is defined in
<code>.github/workflows/main.yml</code>.</p>
<h2 id="run-the-test-suite">Run the test suite</h2>
<p>To run Ibis tests use the next command:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">PYTEST_BACKENDS</span><span class="o">=</span><span class="s2">&quot;sqlite pandas&quot;</span> python -m pytest ibis/tests
</code></pre></div>

<p>You can change <code>sqlite pandas</code> by the backend or backends (space separated) that
you want to test.</p>
<h2 id="style-and-formatting">Style and formatting</h2>
<p>We use <a href="http://flake8.pycqa.org/en/latest/">flake8</a>,
<a href="https://github.com/psf/black">black</a> and
<a href="https://github.com/pre-commit/mirrors-isort">isort</a> to ensure our code
is formatted and linted properly. If you have properly set up your development
environment by running <code>make develop</code>, the pre-commit hooks should check
that your proposed changes continue to conform to our style guide.</p>
<p>We use <a href="https://numpydoc.readthedocs.io/en/latest/format.html">numpydoc</a> as
our standard format for docstrings.</p>
<h2 id="commit-philosophy">Commit philosophy</h2>
<p>We aim to make our individual commits small and tightly focused on the feature
they are implementing. If you find yourself making functional changes to
different areas of the codebase, we prefer you break up your changes into
separate Pull Requests. In general, a philosophy of one Github Issue per
Pull Request is a good rule of thumb, though that isn't always possible.</p>
<p>We avoid merge commits (and in fact they are disabled in the Github repository)
so you may be asked to rebase your changes on top of the latest commits to
master if there have been changes since you last updated a Pull Request.
Rebasing your changes is usually as simple as running
<code>git pull upstream master --rebase</code> and then force-pushing to your branch:
<code>git push origin &lt;branch-name&gt; -f</code>.</p>
<h2 id="commitpr-messages">Commit/PR messages</h2>
<p>Well-structed commit messages allow us to generate comprehensive release notes
and make it very easy to understand what a commit/PR contributes to our
codebase. Commit messages and PR titles should be prefixed with a standard
code the states what kind of change it is. They fall broadly into 3 categories:
<code>FEAT (feature)</code>, <code>BUG (bug)</code>, and <code>SUPP (support)</code>. The <code>SUPP</code>
category has some more fine-grained aliases that you can use, such as <code>BLD</code>
(build), <code>CI</code> (continuous integration), <code>DOC</code> (documentation), <code>TST</code>
(testing), and <code>RLS</code> (releases).</p>
<h2 id="maintainers-guide">Maintainer's guide</h2>
<p>Maintainers generally perform two roles, merging PRs and making official
releases.</p>
<h3 id="merging-prs">Merging PRs</h3>
<p>We have a CLI script that will merge Pull Requests automatically once they have
been reviewed and approved. See the help message in <code>dev/merge-pr.py</code> for
full details. If you have two-factor authentication turned on in Github, you
will have to generate an application-specific password by following this
<a href="https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line">guide</a>.
You will then use that generated password on the command line for the <code>-P</code>
argument.</p>
<p>Access the <a href="https://github.com/ibis-project/ibis/wiki/Merging-PRs">Ibis "Merging PRs" wiki</a> page
for more information.</p>
<h3 id="updating-dependencies">Updating dependencies</h3>
<h4 id="automatic-dependency-updates">Automatic dependency updates</h4>
<p>WhiteSource Renovate will run every day (outside of traditional business hours)
and submit PRs that attempt to update dependencies.</p>
<p>These upgrades use a very conservative update strategy, which is only to
<strong>widen</strong> the dependency range, as opposed to increasing the lower bound.</p>
<p>The PRs will also automatically regenerate <code>poetry.lock</code> and <code>setup.py</code>, so
that in most cases, maintainers and contributors do not have to remember to
generate and commit these files.</p>
<p>In case you need to manually update a dependency see the next section.</p>
<h4 id="manually-updating-dependencies">Manually updating dependencies</h4>
<p><strong>Do not manually edit <code>setup.py</code>, it is automatically generated from <code>pyproject.toml</code></strong></p>
<ol>
<li>Edit <code>pyproject.toml</code> as needed.</li>
<li>Run <code>poetry update</code></li>
<li>Run</li>
</ol>
<div class="codehilite"><pre><span></span><code>$ <span class="nv">PYTHONHASHSEED</span><span class="o">=</span><span class="m">42</span> python ./dev/poetry2setup.py -o setup.py
</code></pre></div>

<p>from the repository root. <code>tomli</code> and <code>poetry-core</code> are necessary to run this
script, they can be <code>pip install</code>ed.</p>
<ol>
<li>Commit your changes and make a pull request.</li>
</ol>
<p>Updates of minor versions of dependencies are handled automatically by
<a href="https://github.com/renovatebot/renovate"><code>renovate</code></a>.</p>
<p>Do not make PRs from changes resulting from running <code>poetry update</code> unless
absolutely necessary.</p>
<h3 id="releasing">Releasing</h3>
<p>Ibis is released in two places:</p>
<ul>
<li><a href="https://pypi.org/">PyPI</a> (the <strong>PY</strong>thon <strong>P</strong>ackage <strong>I</strong>ndex), to enable <code>pip install ibis-framework</code></li>
<li><a href="https://conda-forge.org/">Conda Forge</a>, to enable <code>conda install ibis-framework</code></li>
</ul>
<p>Steps to release:</p>
<h4 id="create-a-new-version">Create a new version</h4>
<p>In the <code>master</code> branch, after the last commit to include in the release, create a tag:</p>
<ul>
<li><code>git tag &lt;version&gt;</code> (e.g. <code>git tag 2.0.0</code>)</li>
</ul>
<p>Originally, Ibis used a version like <code>v0.0.1</code>, but the <code>v</code> was eventually dropped, and recently we
have been using just the <code>0.0.1</code> format.</p>
<p>Push the tag to the remote branch:</p>
<ul>
<li><code>git push --tags upstream master</code></li>
</ul>
<p>The remote <code>upstream</code> is assumed to be the main Ibis repo (i.e. https://github.com/ibis-project/ibis).</p>
<h4 id="release-to-pypi">Release to PyPI</h4>
<p>Just after the tag (without pulling new commits from master, build the Python package:</p>
<ul>
<li><code>python setup.py sdist bdist_wheel</code></li>
</ul>
<p>This requires <code>twine</code> and <code>wheel</code> installed, which you should have if you created your environment
with the repo <code>environment.yml</code> file.</p>
<p>The package will be built in the <code>dist/</code> directory. To upload it to the PyPI server, use:</p>
<ul>
<li><code>twine upload dist/*</code></li>
</ul>
<p>This will create the new package, and will be available immediately via <code>pip install ibis-framework</code>.</p>
<h4 id="release-to-conda-forge">Release to conda-forge</h4>
<p>The conda-forge package is released using the conda-forge feedstock repository: https://github.com/conda-forge/ibis-framework-feedstock/</p>
<p>We need to update its recipe in a pull request, and the new version will be automatically released.
After cloning the feedstock repository, update its recipe with the one in the main Ibis repository:</p>
<ul>
<li><code>cp &lt;ibis-repo&gt;/ci/recipe/meta.yaml &lt;feedstock-repo/recipe/meta.yaml</code></li>
</ul>
<p>Remove the comment at the header of the <code>meta.yaml</code> file. And update the next yaml values:</p>
<ul>
<li>Add at the beginning <code></code> (replace <code>2.0.0</code> by the version being released)</li>
<li>Set <code>number</code> in the <code>build</code> section to <code>0</code> (unless it's a different build for the previous release, then increase by one)</li>
<li>Add the <code>sha256</code> value in the <code>source</code> section. Use <code>sha256sum</code> of the <code>tar.gz</code> file in <code>dist/</code> to know the value.</li>
</ul>
<p>Once the recipe is final, run:</p>
<ul>
<li><code>conda smithy rerender</code></li>
</ul>
<p>This will update the azure configuration files in the feedstock repository, and possibly other files. Open a pull request with all the changes.</p>
<p>The conda-forge package should be ready not long after the pull request is merged, and it can
be installed with <code>conda install -c conda-forge ibis-framework</code>.</p>
<p>Finally, if extra changes have been required to the recipe, besides the version, build and sha256
mentioned before, copy the recipe to the Ibis repository. Keeping the header.</p>
                               
            </div>
        </main>
        <footer class="container pt-4 pt-md-5 border-top">
            
                <ul class="list-inline social-buttons float-right">
                    
                        <li class="list-inline-item">
                            <a href="https://twitter.com/IbisData" target="_blank">
                                <i class="fab fa-twitter"></i>
                            </a>
                        </li>
                    
                        <li class="list-inline-item">
                            <a href="https://github.com/ibis-project/ibis/" target="_blank">
                                <i class="fab fa-github"></i>
                            </a>
                        </li>
                    
                </ul>
            
            
                <p>© Copyright 2014-2021, Ibis developers</p>
            
        </footer>
                
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
                integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
                crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
                integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
                crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
                integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
                crossorigin="anonymous"></script>
    </body>
</html>